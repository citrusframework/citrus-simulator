<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Authors: The Citrus Community">
<title>Citrus Simulator</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>

    h1, h2, h3, h4, h5, h6, #toctitle {
        color: #3b73af;
    }

    div#toctitle {
        content: url("images/citrus-logo-tiny.png");
    }

</style>
</head>
<body id="citrus-simulator" class="book toc2 toc-left">
<div id="header">
<h1>Citrus Simulator</h1>
<div class="details">
<span id="author" class="author">Authors: The Citrus Community</span><br>
<span id="revnumber">version 3.1.1,</span>
<span id="revdate">2025-09-28</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">citrus-simulator</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#citrus-spring-boot-simulator">Citrus Spring-Boot Simulator</a></li>
<li><a href="#project-status">Project Status</a></li>
<li><a href="#prerequisites">Prerequisites</a>
<ul class="sectlevel3">
<li><a href="#limitations-java-17">Java 17</a></li>
<li><a href="#browser-compatibility">Browser Compatibility</a></li>
<li><a href="#compatibility-matrix">Compatibility Matrix</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#installation">Installation</a>
<ul class="sectlevel2">
<li><a href="#gradle-build">Build with Gradle</a>
<ul class="sectlevel3">
<li><a href="#first-scenario">Writing your first Scenario</a></li>
</ul>
</li>
<li><a href="#maven-build">Build with Maven</a></li>
<li><a href="#maven-archetype">Maven Archetypes</a></li>
<li><a href="#development">Development</a></li>
<li><a href="#docker-build">Building a Docker Container</a>
<ul class="sectlevel3">
<li><a href="#dockerfile">Creating a Dockerfile</a></li>
<li><a href="#building-docker-image">Building the Docker Image</a></li>
<li><a href="#running-docker-image">Running the Docker Container</a></li>
<li><a href="#best-practices">Best Practices</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#concepts">1. Concepts</a>
<ul class="sectlevel2">
<li><a href="#concept-simulator-application">1.1. Simulator Application</a></li>
<li><a href="#concept-simulator-properties">1.2. Simulator Properties</a>
<ul class="sectlevel3">
<li><a href="#concept-simulator-system-properties">1.2.1. System Properties</a></li>
<li><a href="#concept-simulator-environment-variables">1.2.2. Environment Variables</a></li>
</ul>
</li>
<li><a href="#concept-simulator-spring-configuration">1.3. Spring Bean Configuration</a></li>
<li><a href="#rest-api">1.4. REST API</a>
<ul class="sectlevel3">
<li><a href="#receive-single-test-result">1.4.1. Receive SINGLE Test-Parameter</a></li>
<li><a href="#receive-scenario-execution-details">1.4.2. Receive Scenario Execution with Details</a></li>
<li><a href="#scenario-resource">1.4.3. Scenario Resource</a></li>
<li><a href="#rest-api-pagination">1.4.4. Pagination</a></li>
<li><a href="#rest-api-filtering">1.4.5. Filtering</a></li>
</ul>
</li>
<li><a href="#scenario-mapper">1.5. Scenario Mapper</a>
<ul class="sectlevel3">
<li><a href="#scenario-mapper-default">1.5.1. Default Mapping Behavior</a></li>
<li><a href="#scenario-mapper-configuration">1.5.2. Custom Mapper Configuration</a></li>
</ul>
</li>
<li><a href="#scenarios">1.6. Simulator Scenarios</a></li>
<li><a href="#intermediate-messages">1.7. Intermediate Messages</a></li>
<li><a href="#simulations-error-handling">1.8. Simulation Errors Handling</a></li>
</ul>
</li>
<li><a href="#advanced-concepts">2. Advanced Concepts</a>
<ul class="sectlevel2">
<li><a href="#advanced-concepts-execution-modes">2.1. Execution Modes in Citrus Simulator</a>
<ul class="sectlevel3">
<li><a href="#advanced-concepts-execution-sync-mode">2.1.1. Synchronous Execution Mode</a></li>
<li><a href="#advanced-concepts-execution-async-mode">2.1.2. Asynchronous Execution Mode</a></li>
<li><a href="#advanced-concepts-execution-custom-mode">2.1.3. Custom Executors</a></li>
<li><a href="#advanced-concepts-execution-mode-best-practices">2.1.4. Best Practices</a></li>
</ul>
</li>
<li><a href="#advanced-concepts-database-schema">2.2. Database Schema</a></li>
<li><a href="#advanced-concepts-scenario-cache">2.3. Scenario Cache</a></li>
<li><a href="#advanced-concepts-housekeeping">2.4. Housekeeping</a></li>
</ul>
</li>
<li><a href="#rest">3. REST Support</a>
<ul class="sectlevel2">
<li><a href="#rest-config">3.1. Configuration</a></li>
<li><a href="#rest-customization">3.2. Advanced Customizations</a></li>
<li><a href="#rest-request-mapping">3.3. Request Mapping</a></li>
<li><a href="#rest-status-code">3.4. HTTP Responses</a></li>
<li><a href="#rest-swagger">3.5. Swagger Support</a></li>
</ul>
</li>
<li><a href="#web-service">4. Web Service Support</a>
<ul class="sectlevel2">
<li><a href="#web-service-config">4.1. Configuration</a></li>
<li><a href="#web-service-customization">4.2. Advanced Customizations</a></li>
<li><a href="#web-service-response">4.3. SOAP Response</a></li>
<li><a href="#web-service-faults">4.4. SOAP Faults</a></li>
<li><a href="#web-service-wsdl">4.5. WSDL Support</a>
<ul class="sectlevel3">
<li><a href="#web-service-wsdl-properties">4.5.1. WSDL System Properties</a></li>
<li><a href="#data-dictionaries">Data dictionaries</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#jms">5. JMS support</a>
<ul class="sectlevel2">
<li><a href="#jms-config">5.1. Configuration</a></li>
<li><a href="#jms-async">5.2. Asynchronous communication</a></li>
<li><a href="#jms-sync">5.3. Synchronous communication</a></li>
</ul>
</li>
<li><a href="#endpoint">6. Endpoint support</a>
<ul class="sectlevel2">
<li><a href="#endpoint-config">6.1. Configuration</a></li>
</ul>
</li>
<li><a href="#user-interface">7. User Interface</a>
<ul class="sectlevel2">
<li><a href="#user-interface-integration">7.1. Integrating the Angular-based UI</a></li>
<li><a href="#user-interface-scenarios">7.2. Scenarios</a></li>
<li><a href="#user-interface-scenario-results">7.3. Scenario Executions</a>
<ul class="sectlevel3">
<li><a href="#user-interface-execution-results">7.3.1. Viewing Execution Results</a></li>
</ul>
</li>
<li><a href="#user-interface-entities">7.4. Exploring Database Entities</a>
<ul class="sectlevel3">
<li><a href="#user-interface-entities-access">7.4.1. Accessing Database Entities</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#starter">8. Starter</a>
<ul class="sectlevel2">
<li><a href="#starter-parameter">8.1. Starter Parameter</a></li>
</ul>
</li>
<li><a href="#samples">9. Samples</a>
<ul class="sectlevel2">
<li><a href="#samples-rest">9.1. REST sample</a></li>
<li><a href="#samples-soap">9.2. SOAP sample</a></li>
<li><a href="#samples-jms">9.3. JMS sample</a></li>
<li><a href="#samples-mail">9.4. Mail sample</a></li>
<li><a href="#samples-combined">9.5. Combined sample</a></li>
</ul>
</li>
<li><a href="#links">10. Links &amp; Further reading</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><strong>Version: 3.1.1</strong></p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/citrus-logo-small.png" alt="citrus-logo"></span></p>
</div>
<!-- toc disabled -->
</div>
</div>
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a><a class="link" href="#introduction">Introduction</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Citrus Framework Simulator is a comprehensive tool that allows for the simulation of various messaging transports including HTTP REST, SOAP WebService, JMS, RMI, mail messaging, and more.
This simulator stands out with its robust server APIs that interact with client requests, delivering predefined messages tailored to specific scenarios.
The power of the simulator’s response logic cannot be overstated; it is designed to emulate any server interface effortlessly.</p>
</div>
<div class="sect2">
<h3 id="citrus-spring-boot-simulator"><a class="anchor" href="#citrus-spring-boot-simulator"></a><a class="link" href="#citrus-spring-boot-simulator">Citrus Spring-Boot Simulator</a></h3>
<div class="paragraph">
<p>Utilizing the synergy of <a href="https://projects.spring.io/spring-boot/" target="_blank" rel="noopener">Spring Boot</a> and the <a href="https://citrusframework.org" target="_blank" rel="noopener">Citrus</a> testing framework, the <code>citrus-spring-boot-simulator</code> empowers you to craft your simulator scenarios using either Java or XML.
Each interaction with the simulator is logged in an internal database, accessible for review through the REST API or the web UI.
We welcome your feedback and contributions with great appreciation!</p>
</div>
</div>
<div class="sect2">
<h3 id="project-status"><a class="anchor" href="#project-status"></a><a class="link" href="#project-status">Project Status</a></h3>
<div class="paragraph">
<p>We are proud to announce that the simulator application is stable and reliable for general use.
However, it is important to note that certain experimental features are included as part of our commitment to innovation.
These features are introduced with "feature flags" and are still in the developmental phase:</p>
</div>
<div class="paragraph">
<div class="title">Experimental Features</div>
<p><strong>WSDL Generated Scenarios</strong>: Automatically create simulator scenarios from a WSDL file.</p>
</div>
<div class="paragraph">
<p><strong>Swagger Generated Scenarios</strong>: Automatically create simulator scenarios from a Swagger API file.</p>
</div>
<div class="paragraph">
<p>These features are evolving, and with the valuable insights we receive from our community, we are optimistic that they will achieve stability in due course.</p>
</div>
</div>
<div class="sect2">
<h3 id="prerequisites"><a class="anchor" href="#prerequisites"></a><a class="link" href="#prerequisites">Prerequisites</a></h3>
<div class="paragraph">
<p>Before embarking on your journey with the simulator application, ensure you meet the following prerequisites:</p>
</div>
<div class="sect3">
<h4 id="limitations-java-17"><a class="anchor" href="#limitations-java-17"></a><a class="link" href="#limitations-java-17">Java 17</a></h4>
<div class="paragraph">
<p>The simulator is built with Java 17 and is compatible with versions up to Java 21.
As such, Java 17 or later must be installed on your machine.
Confirm that your Java Development Kit (JDK) is properly installed and configured with the following command in a new terminal window:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">java -version</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="browser-compatibility"><a class="anchor" href="#browser-compatibility"></a><a class="link" href="#browser-compatibility">Browser Compatibility</a></h4>
<div class="paragraph">
<p>The simulator boasts a compact web interface that springs to life upon startup.
You can access it on the root URL of your simulator application.</p>
</div>
<div class="paragraph">
<p>The <code>citrus-simulator-ui</code> module enriches this experience further with a sophisticated <a href="https://angular.io/" target="_blank" rel="noopener">Angular</a>-based application.
This UI is best accessed through a web browser .
It’s important to note that we do not perform cross-browser testing during our pipeline.
Thus, we cannot guarantee compatibility in all browsers.
Development and testing are primarily done on Chrome and Firefox, which are likely to yield the best experience.</p>
</div>
</div>
<div class="sect3">
<h4 id="compatibility-matrix"><a class="anchor" href="#compatibility-matrix"></a><a class="link" href="#compatibility-matrix">Compatibility Matrix</a></h4>
<div class="paragraph">
<p>The below table depicts the compatible version ranges of the <a href="https://github.com/citrusframework/citrus-simulator" target="_blank" rel="noopener"><code>citrus-simulator</code></a>, the <a href="https://github.com/citrusframework/citrus-simulator" target="_blank" rel="noopener">citrusframework</a> and <a href="https://spring.io/projects/spring-boot" target="_blank" rel="noopener">Spring Boot</a>.</p>
</div>
<div class="paragraph">
<p>The compatible java version is derived from the combination of the underlying frameworks.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Simulator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Citrus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring-Boot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>v3.0.0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; <code>v4.2.0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; <code>v3.2.5</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">17 to 21</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>v2.1.1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt; <code>v3.4.0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt; <code>v3.0.0</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8 to 11</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installation"><a class="anchor" href="#installation"></a><a class="link" href="#installation">Installation</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Citrus simulator is a web application that leverages <a href="https://projects.spring.io/spring-boot/" target="_blank" rel="noopener">Spring Boot</a> and <a href="https://angular.io/" target="_blank" rel="noopener">Angular</a>.
It can be run as a Java application on your local machine or as a container/pod in Docker, Kubernetes, or OpenShift.</p>
</div>
<div class="paragraph">
<p>While any build system can be used to build the simulator, we will illustrate how to set up the project using <a href="https://gradle.org/">Gradle</a> and <a href="https://maven.apache.org/">Maven</a>.</p>
</div>
<div class="sect2">
<h3 id="gradle-build"><a class="anchor" href="#gradle-build"></a><a class="link" href="#gradle-build">Build with Gradle</a></h3>
<div class="paragraph">
<p>Gradle uses Groovy-based build scripts which we need to add when starting a new simulator project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath(<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.boot:spring-boot-gradle-plugin:3.1.5</span><span class="delimiter">&quot;</span></span>)
    }
}

apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">java</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">eclipse</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">idea</span><span class="delimiter">'</span></span>
apply <span class="key">plugin</span>: <span class="string"><span class="delimiter">'</span><span class="content">org.springframework.boot</span><span class="delimiter">'</span></span>

jar {
    group = <span class="string"><span class="delimiter">&quot;</span><span class="content">org.citrusframework.simulator</span><span class="delimiter">&quot;</span></span>
    baseName = <span class="string"><span class="delimiter">'</span><span class="content">citrus-simulator-sample</span><span class="delimiter">'</span></span>
    version = <span class="string"><span class="delimiter">'</span><span class="content">1.0.0</span><span class="delimiter">'</span></span>
}

repositories {
    mavenCentral()
}

sourceCompatibility = <span class="integer">17</span>
targetCompatibility = <span class="integer">17</span>

dependencies {
    implementation(<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.boot:spring-boot-starter-web</span><span class="delimiter">&quot;</span></span>)
    implementation(<span class="string"><span class="delimiter">&quot;</span><span class="content">org.citrusframework:citrus-spring-boot-simulator:3.0.0</span><span class="delimiter">&quot;</span></span>)
    testImplementation(<span class="string"><span class="delimiter">&quot;</span><span class="content">junit:junit</span><span class="delimiter">&quot;</span></span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above build script will set up the necessary Spring Boot dependencies and include the basic <code>citrus-spring-boot-simulator</code> dependency.
With the Gradle build complete, we&#8217;re now ready to build and run the simulator.</p>
</div>
<div class="sect3">
<h4 id="first-scenario"><a class="anchor" href="#first-scenario"></a><a class="link" href="#first-scenario">Writing your first Scenario</a></h4>
<div class="paragraph">
<p>Let&#8217;s add a basic Spring Boot main class to our project next.</p>
</div>
<div class="listingblock">
<div class="title">src/main/java/org/citrusframework/simulator/Simulator.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.citrusframework.simulator</span>;

<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> {

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally, we&#8217;ll implement a default scenario that will be triggered by incoming requests.</p>
</div>
<div class="listingblock">
<div class="title">DefaultScenario.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.citrusframework.simulator</span>;

<span class="keyword">import</span> <span class="include">org.citrusframework.simulator.scenario.AbstractSimulatorScenario</span>;
<span class="keyword">import</span> <span class="include">org.citrusframework.simulator.scenario.Scenario</span>;
<span class="keyword">import</span> <span class="include">org.citrusframework.simulator.scenario.ScenarioRunner</span>;
<span class="keyword">import</span> <span class="include">org.springframework.http.HttpStatus</span>;

<span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Default</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">DefaultScenario</span> <span class="directive">extends</span> AbstractSimulatorScenario {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.<span class="error">$</span>(scenario.http()
            .receive().post());

        scenario.<span class="error">$</span>(scenario.http()
            .send()
            .response(HttpStatus.OK)
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;DefaultResponse&gt;This is a default response!&lt;/DefaultResponse&gt;</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This default scenario will respond with an <code>Http 200 OK</code>.</p>
</div>
<div class="paragraph">
<p>To build and run the simulator application, use the following commands:</p>
</div>
<div class="listingblock">
<div class="title">Gradle build</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">./gradlew build bootRun</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upon execution, the application should start up and the console will display log output detailing the process.
The web server should be active within seconds.
After the application is running, open your browser and go to <a href="http://localhost:8080">http://localhost:8080</a> to see the basic simulator user interface.
For a more detailed interface, please consult the <a href="#user-interface">chapter on the user interface</a>.</p>
</div>
<div class="paragraph">
<p>The REST default scenario that we&#8217;ve included is reachable at <a href="http://localhost:8080/services/rest/">http://localhost:8080/services/rest/</a>, where you&#8217;ll encounter the default message <code>Welcome to the Citrus simulator</code>.</p>
</div>
<div class="paragraph">
<p>You are now prepared to utilize the Citrus simulator.
The next steps involve comprehending the <a href="#concepts">concepts</a> and crafting some <a href="#scenarios">simulator scenarios</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="maven-build"><a class="anchor" href="#maven-build"></a><a class="link" href="#maven-build">Build with Maven</a></h3>
<div class="paragraph">
<p>Using Maven, you can easily incorporate the simulator into your project. Maven automatically manages the download of all necessary dependencies and project artifacts. Once configured, the simulator can be executed using Spring&#8217;s embedded web servers.</p>
</div>
<div class="paragraph">
<p>Below is a sample <code>pom.xml</code> for a Maven project configured as a Spring Boot application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0</span><span class="delimiter">&quot;</span></span>
         <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
         <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;modelVersion&gt;</span>4.0.0<span class="tag">&lt;/modelVersion&gt;</span>

  <span class="tag">&lt;groupId&gt;</span>org.citrusframework<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>citrus-simulator-sample<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>1.0.0<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;name&gt;</span>${project.artifactId}<span class="tag">&lt;/name&gt;</span>

  <span class="tag">&lt;properties&gt;</span>
    <span class="tag">&lt;java.version&gt;</span>17<span class="tag">&lt;/java.version&gt;</span>
    <span class="tag">&lt;project.build.sourceEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.build.sourceEncoding&gt;</span>
    <span class="tag">&lt;project.reporting.outputEncoding&gt;</span>UTF-8<span class="tag">&lt;/project.reporting.outputEncoding&gt;</span>
    <span class="tag">&lt;citrus.simulator.version&gt;</span>3.0.0<span class="tag">&lt;/citrus.simulator.version&gt;</span>
    <span class="tag">&lt;spring.boot.version&gt;</span>3.1.5<span class="tag">&lt;/spring.boot.version&gt;</span>
  <span class="tag">&lt;/properties&gt;</span>

  <span class="tag">&lt;dependencyManagement&gt;</span>
    <span class="tag">&lt;dependencies&gt;</span>
      <span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>spring-boot-dependencies<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>${spring.boot.version}<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;type&gt;</span>pom<span class="tag">&lt;/type&gt;</span>
        <span class="tag">&lt;scope&gt;</span>import<span class="tag">&lt;/scope&gt;</span>
      <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;/dependencies&gt;</span>
  <span class="tag">&lt;/dependencyManagement&gt;</span>

  <span class="tag">&lt;dependencies&gt;</span>
    <span class="comment">&lt;!-- Citrus Simulator --&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.citrusframework<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>citrus-spring-boot-simulator<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;version&gt;</span>${citrus.simulator.version}<span class="tag">&lt;/version&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="comment">&lt;!-- Other dependencies --&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>

  <span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>maven-compiler-plugin<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>3.8.1<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;configuration&gt;</span>
          <span class="tag">&lt;source&gt;</span>${java.version}<span class="tag">&lt;/source&gt;</span>
          <span class="tag">&lt;target&gt;</span>${java.version}<span class="tag">&lt;/target&gt;</span>
          <span class="tag">&lt;encoding&gt;</span>${project.build.sourceEncoding}<span class="tag">&lt;/encoding&gt;</span>
        <span class="tag">&lt;/configuration&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span>
      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>${spring.boot.version}<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;executions&gt;</span>
          <span class="tag">&lt;execution&gt;</span>
            <span class="tag">&lt;goals&gt;</span>
              <span class="tag">&lt;goal&gt;</span>repackage<span class="tag">&lt;/goal&gt;</span>
            <span class="tag">&lt;/goals&gt;</span>
          <span class="tag">&lt;/execution&gt;</span>
        <span class="tag">&lt;/executions&gt;</span>
        <span class="tag">&lt;configuration&gt;</span>
          <span class="tag">&lt;fork&gt;</span>true<span class="tag">&lt;/fork&gt;</span>
        <span class="tag">&lt;/configuration&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
  <span class="tag">&lt;/build&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>pom.xml</code> file above sets up the Spring Boot application and includes the Citrus Simulator dependency. With this setup complete, the simulator is ready to be built and run.</p>
</div>
<div class="paragraph">
<p>That&#8217;s it, you&#8217;re read to write your <a href="#first-scenario">first Scenario</a>.</p>
</div>
<div class="paragraph">
<p>To build and run the simulator with Maven, execute the following commands from the command line:</p>
</div>
<div class="listingblock">
<div class="title">Maven build</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn clean install
mvn spring-boot:run</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upon execution, the application should start up and the console will display log output detailing the process.
The web server should be active within seconds.
After the application is running, open your browser and go to <a href="http://localhost:8080">http://localhost:8080</a> to see the basic simulator user interface.
For a more detailed interface, please consult the <a href="#user-interface">chapter on the user interface</a>.</p>
</div>
<div class="paragraph">
<p>The REST default scenario that we&#8217;ve included is reachable at <a href="http://localhost:8080/services/rest/">http://localhost:8080/services/rest/</a>, where you&#8217;ll encounter the default message <code>Welcome to the Citrus simulator</code>.</p>
</div>
<div class="paragraph">
<p>You are now prepared to utilize the Citrus simulator.
The next steps involve comprehending the <a href="#concepts">concepts</a> and crafting some <a href="#scenarios">simulator scenarios</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="maven-archetype"><a class="anchor" href="#maven-archetype"></a><a class="link" href="#maven-archetype">Maven Archetypes</a></h3>
<div class="paragraph">
<p>Maven archetypes are templates that can quickly set up a new project structure for you.
When starting a new Citrus Simulator project, using a Maven archetype can save you time and effort.</p>
</div>
<div class="paragraph">
<p>To generate a new project using the Citrus Simulator archetype, run the following command in your terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn archetype:generate -B \
  -DarchetypeGroupId=org.citrusframework.archetypes \
  -DarchetypeArtifactId=citrus-simulator-archetype-rest \
  -DarchetypeVersion=3.0.0 \  <i class="conum" data-value="1"></i><b>(1)</b>
  -DgroupId=org.citrusframework.simulator \
  -DartifactId=citrus-simulator-rest \
  -Dversion=1.0.0</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code>3.0.0</code> with the version of Citrus Simulator you wish to use.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>-B</code> flag indicates batch mode, which makes the command non-interactive.
If you omit this, Maven will interactively ask you for any required values not provided as <code>-D</code> options.</p>
</div>
<div class="paragraph">
<p>Upon executing the command, Maven will generate a new project based on the specified archetype.
This project will be placed in a new directory corresponding to the <code>artifactId</code> you provided.
Change into this directory to proceed with building your new simulator project.</p>
</div>
<div class="paragraph">
<p>Citrus provides various archetypes for different types of simulators, each tailored to a specific protocol or data format:</p>
</div>
<div class="hdlist">
<div class="title">Maven Archetypes</div>
<table>
<tr>
<td class="hdlist1">
<code>citrus-simulator-archetype-rest</code>
</td>
<td class="hdlist2">
<p>Initializes a sample HTTP REST simulator.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus-simulator-archetype-ws</code>
</td>
<td class="hdlist2">
<p>Sets up a SOAP web service simulator sample.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus-simulator-archetype-jms</code>
</td>
<td class="hdlist2">
<p>Creates a JMS simulator sample.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus-simulator-archetype-mail</code>
</td>
<td class="hdlist2">
<p>Generates a mail simulator sample.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus-simulator-archetype-swagger</code>
</td>
<td class="hdlist2">
<p>(<em>Experimental</em>) Auto-generates a simulator from a Swagger OpenAPI specification.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus-simulator-archetype-wsdl</code>
</td>
<td class="hdlist2">
<p>(<em>Experimental</em>) Auto-generates a simulator from a SOAP WSDL specification.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Choose the archetype that best matches the needs of your project.</p>
</div>
</div>
<div class="sect2">
<h3 id="development"><a class="anchor" href="#development"></a><a class="link" href="#development">Development</a></h3>
<div class="paragraph">
<p>With the project&#8217;s build and source code established, you can begin coding your simulator scenarios.
This project is a standard Java application, which you can develop within your preferred Java IDE.
Tools like Maven or Gradle are used to compile and package your simulator into an executable artifact, typically a Spring Boot executable jar.</p>
</div>
<div class="paragraph">
<p>To optimize your development process, consider using Spring Boot DevTools.
This library provides additional development-time features that can greatly enhance your productivity:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Automatic restart</strong>: Any changes to your code trigger a quick application restart, making it faster to see the changes in action without manually restarting the server.</p>
</li>
<li>
<p><strong>LiveReload</strong>: Spring Boot DevTools includes a LiveReload server that can automatically trigger a browser refresh when a resource is changed.</p>
</li>
<li>
<p><strong>Property defaults</strong>: DevTools sets sensible development-time property defaults, reducing the need for manual configuration.</p>
</li>
<li>
<p><strong>Remote development</strong>: It is possible to remotely debug Spring applications.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To use DevTools, include the following dependency in your build configuration:</p>
</div>
<div class="listingblock">
<div class="title">Maven Dependency for Spring Boot DevTools</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependencies&gt;</span>
    <span class="comment">&lt;!-- Other dependencies... --&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>spring-boot-devtools<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;scope&gt;</span>runtime<span class="tag">&lt;/scope&gt;</span>
        <span class="tag">&lt;optional&gt;</span>true<span class="tag">&lt;/optional&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With Spring Boot DevTools included, every time you compile your code, the application will restart, recognizing your changes immediately.
This makes the development loop much faster and feedback-oriented.</p>
</div>
<div class="paragraph">
<p>Ensure that your IDE is configured to build the project automatically on each save.
If you&#8217;re using an IDE like Eclipse or IntelliJ IDEA, they have built-in support for automatic compilation which integrates seamlessly with DevTools.</p>
</div>
<div class="paragraph">
<p>Remember to disable the DevTools in production environments, as its features are only beneficial in a development setting and may have performance implications for production deployments.</p>
</div>
<div class="paragraph">
<p>With your development environment optimized, you can now focus on adding functionality and creating comprehensive simulation scenarios for thorough testing and robust service emulation.</p>
</div>
</div>
<div class="sect2">
<h3 id="docker-build"><a class="anchor" href="#docker-build"></a><a class="link" href="#docker-build">Building a Docker Container</a></h3>
<div class="paragraph">
<p>Containerizing your Spring Boot application using Docker simplifies deployment and ensures consistency across different environments.
There is lots of documentation about this process available online.
It&#8217;s best to consider multiple sources, especially for a production build!
To get started, here&#8217;s how to package your Citrus Simulator into a Docker container.</p>
</div>
<div class="sect3">
<h4 id="dockerfile"><a class="anchor" href="#dockerfile"></a><a class="link" href="#dockerfile">Creating a Dockerfile</a></h4>
<div class="paragraph">
<p>The first step in containerizing your application is to create a <code>Dockerfile</code>.
This text document contains all the commands a user could call on the command line to assemble an image.
Below is a simple <code>Dockerfile</code> to get you started:</p>
</div>
<div class="listingblock">
<div class="title">Dockerfile</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="dockerfile"># Start with a base image containing Java runtime
FROM openjdk:17-jdk-slim as build

# The application's jar file
ARG JAR_FILE=target/*.jar

# Add the application's jar to the container
COPY ${JAR_FILE} app.jar

# Run the jar file
ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This <code>Dockerfile</code> starts with a lightweight JDK 17 image, copies your application&#8217;s JAR file into the image, and sets the entry point to run the JAR file.</p>
</div>
</div>
<div class="sect3">
<h4 id="building-docker-image"><a class="anchor" href="#building-docker-image"></a><a class="link" href="#building-docker-image">Building the Docker Image</a></h4>
<div class="paragraph">
<p>After creating your <code>Dockerfile</code>, use the Docker CLI to build the image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">docker build -t citrus-simulator .</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-t</code> flag tags your Docker image, so it&#8217;s easier to find later.
The <code>.</code> at the end of the command tells Docker to look for the <code>Dockerfile</code> in the current directory.</p>
</div>
</div>
<div class="sect3">
<h4 id="running-docker-image"><a class="anchor" href="#running-docker-image"></a><a class="link" href="#running-docker-image">Running the Docker Container</a></h4>
<div class="paragraph">
<p>Once the image is built, you can run it as a container:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">docker run -p 8080:8080 citrus-simulator</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>-p</code> flag publishes a container&#8217;s port to the host.
This command maps the application&#8217;s port 8080 to the same port on the host machine, so you can access the application through <code><a href="http://localhost:8080" class="bare">http://localhost:8080</a></code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="best-practices"><a class="anchor" href="#best-practices"></a><a class="link" href="#best-practices">Best Practices</a></h4>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Multi-stage Builds</strong>: For a more efficient build process, especially if you need to build the JAR file within Docker, consider using a multi-stage Dockerfile.</p>
</li>
<li>
<p><strong>Avoid running as root</strong>: For security reasons, it&#8217;s best practice to not run the application as the root user. You can create a user within your Dockerfile and run the application as this user.</p>
</li>
<li>
<p><strong>Configuration</strong>: Externalize your configuration. For instance, you can use environment variables to configure your application for different environments.</p>
</li>
<li>
<p><strong>Health checks</strong>: Implement health checks in your application and add a <code>HEALTHCHECK</code> instruction to your Dockerfile.</p>
</li>
<li>
<p><strong>Logs</strong>: Make sure your application logs to the console so that Docker can capture the logs.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>By following these steps and best practices, you will have a Docker container for your Citrus Simulator that can be deployed to any environment that supports Docker.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="concepts"><a class="anchor" href="#concepts"></a><a class="link" href="#concepts">1. Concepts</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Citrus simulator&#8217;s primary focus is to provide a simple means to simulate one or more endpoints (HTTP, JMS, SMTP, etc).
Once the simulator is up and running, it waits for an incoming request (JSON, SOAP, XML, etc.) to arrive at any of its configured endpoints and reacts accordingly.
The simulator examines the incoming request and determines which <a href="#scenarios">simulator scenario</a> should be executed for handling the request.
Typically, the selected scenario creates a response message to send back to the calling client.</p>
</div>
<div class="paragraph">
<p>A <a href="#scenario-mapper">scenario mapper</a> is used to help the simulator determine the correct scenario to be executed.
Different scenario mappers are supported that use the request header data or payload data to determine the appropriate scenario to run.</p>
</div>
<div class="paragraph">
<p>A <a href="#scenarios">simulator scenario</a> is capable of handling one or more request messages.
When executed, it receives the request and can return an appropriate response message to the calling client.
By defining multiple simulator scenarios, the Citrus simulator is able to respond to different requests accordingly.</p>
</div>
<div class="paragraph">
<p>A simulator scenario is composed of one or more actions.
For the most trivial scenarios, there is generally an action for receiving a request and an action for sending a response.
Because the Citrus simulator has access to the underlying Citrus framework functionality, you can access a wide range of actions that are available within the Citrus framework and use these when configuring a scenario.</p>
</div>
<div class="paragraph">
<p>To keep an eye on what the simulator is doing, what requests were received or sent, or what scenarios were executed, a <a href="#user-interface">user interface</a> is provided.
In addition to seeing what is going on, it is also possible to trigger scenarios manually.</p>
</div>
<div class="sect2">
<h3 id="concept-simulator-application"><a class="anchor" href="#concept-simulator-application"></a><a class="link" href="#concept-simulator-application">1.1. Simulator Application</a></h3>
<div class="paragraph">
<p>The simulator is a standard Spring Boot application.
This means we have a main class that loads the Spring Boot application.
If you haven&#8217;t set one up already, see how to get started with <a href="#gradle-build">Gradle</a> or <a href="#maven-build">Maven</a>.</p>
</div>
<div class="paragraph">
<p>This class is the main entrance for all configuration and customization statements.
By default, REST support is enabled with all configuration needed.
You can enable or disable the message transport support for different technologies via application properties.</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">citrus.simulator.rest.enabled=true
citrus.simulator.jms.enabled=true
citrus.simulator.ws.default-support=true
citrus.simulator.ws.client.enabled=true
citrus.simulator.endpoint.enabled=true
spring.webservices.autoconfiguration.enabled=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>When enabled, the simulator&#8217;s autoconfiguration for this specific message transport is activated, and all required beans and configuration are loaded at startup.</p>
</div>
<div class="hdlist">
<div class="title">Simulator support</div>
<table>
<tr>
<td class="hdlist1">
<code>citrus.simulator.rest.enabled</code>
</td>
<td class="hdlist2">
<p>Enables <a href="#rest">Http REST support</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.ws.enabled</code>
</td>
<td class="hdlist2">
<p>Enables <a href="#web-service">WS support</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.ws.client.enabled</code>
</td>
<td class="hdlist2">
<p>Enables <a href="#samples-soap">SOAP web services client support</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.jms.enabled</code>
</td>
<td class="hdlist2">
<p>Enables <a href="#jms">JMS support</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.endpoint.enabled</code>
</td>
<td class="hdlist2">
<p>Enables generic <a href="#endpoint">endpoint component support</a></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>spring.webservices.autoconfiguration.enabled</code>
</td>
<td class="hdlist2">
<p>Enables automatic Spring WS configuration.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also combine message transports in the simulator application, although this feature is of experimental nature up to now.</p>
</div>
</div>
<div class="sect2">
<h3 id="concept-simulator-properties"><a class="anchor" href="#concept-simulator-properties"></a><a class="link" href="#concept-simulator-properties">1.2. Simulator Properties</a></h3>
<div class="paragraph">
<p>The simulator is capable of loading configuration from system properties, environment variables, and property files.
First, the default Spring Boot properties configuration mechanism is supported.
Following from that, you can add properties to the <code>application.properties</code> file in your project resources to adjust simulator behavior.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">citrus.simulator.rest.enabled=true
citrus.simulator.default-timeout=10000
citrus.simulator.template-path=com/company/simulator/templates</code></pre>
</div>
</div>
<div class="paragraph">
<p>The available simulator properties are grouped into the following configuration classes:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>org.citrusframework.simulator.config.SimulatorConfigurationProperties</code>
</td>
<td class="hdlist2">
<p><code>prefix=<strong>citrus.simulator</strong></code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>org.citrusframework.simulator.http.SimulatorRestConfigurationProperties</code>
</td>
<td class="hdlist2">
<p><code>prefix=<strong>citrus.simulator.rest</strong></code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>org.citrusframework.simulator.ws.SimulatorWebServiceConfigurationProperties</code>
</td>
<td class="hdlist2">
<p><code>prefix=<strong>citrus.simulator.ws</strong></code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>org.citrusframework.simulator.ws.SimulatorWebServiceClientConfigurationProperties</code>
</td>
<td class="hdlist2">
<p><code>prefix=<strong>citrus.simulator.ws.client</strong></code></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>org.citrusframework.simulator.jms.SimulatorJmsConfigurationProperties</code>
</td>
<td class="hdlist2">
<p><code>prefix=<strong>citrus.simulator.jms</strong></code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are several properties that you can use to customize the simulator behavior, such as:</p>
</div>
<div class="hdlist">
<div class="title">Spring Boot application properties</div>
<table>
<tr>
<td class="hdlist1">
<code>citrus.simulator.template-path</code>
</td>
<td class="hdlist2">
<p>Default path to message payload template files.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.default-scenario</code>
</td>
<td class="hdlist2">
<p>Default scenario name.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.default-timeout</code>
</td>
<td class="hdlist2">
<p>Timeout when waiting for inbound messages.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.template-validation</code>
</td>
<td class="hdlist2">
<p>Enable/disable schema validation.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.exception-delay</code>
</td>
<td class="hdlist2">
<p>Default delay in milliseconds to wait after uncategorized exceptions.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.executor-threads</code>
</td>
<td class="hdlist2">
<p>The number of threads available for parallel scenario execution.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.rest.url-mapping</code>
</td>
<td class="hdlist2">
<p>Handler adapter URL mapping for inbound requests.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.ws.servlet-mappings</code>
</td>
<td class="hdlist2">
<p>Message dispatcher servlet mappings for inbound SOAP requests.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.jms.inbound-destination</code>
</td>
<td class="hdlist2">
<p>JMS destination name to consume inbound messages from.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.jms.reply-destination</code>
</td>
<td class="hdlist2">
<p>JMS destination name to publish reply messages to.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Please refer to the respective configuration property classes to see in detail what property settings are supported.</p>
</div>
<div class="sect3">
<h4 id="concept-simulator-system-properties"><a class="anchor" href="#concept-simulator-system-properties"></a><a class="link" href="#concept-simulator-system-properties">1.2.1. System Properties</a></h4>
<div class="paragraph">
<p>In addition to the default Spring Boot property replacement, the simulator also supports system properties and environment variables.
The properties include:</p>
</div>
<div class="hdlist">
<div class="title">System property names</div>
<table>
<tr>
<td class="hdlist1">
<code>citrus.simulator.configuration.class</code>
</td>
<td class="hdlist2">
<p>Java configuration class that is automatically loaded (default is org.citrusframework.simulator.SimulatorConfig).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.template-path</code>
</td>
<td class="hdlist2">
<p>Default path to message payload template files.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.default-scenario</code>
</td>
<td class="hdlist2">
<p>Default scenario name.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.default-timeout</code>
</td>
<td class="hdlist2">
<p>Timeout when waiting for inbound messages.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.template-validation</code>
</td>
<td class="hdlist2">
<p>Enable/disable schema validation.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.exception-delay</code>
</td>
<td class="hdlist2">
<p>Default delay in milliseconds to wait after uncategorized exceptions.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.executor-threads</code>
</td>
<td class="hdlist2">
<p>The number of threads available for parallel scenario execution.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.rest.url-mappings</code>
</td>
<td class="hdlist2">
<p>Handler adapter URL mappings for inbound requests.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.ws.servlet-mappings</code>
</td>
<td class="hdlist2">
<p>Message dispatcher servlet mappings for inbound SOAP requests.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.jms.inbound-destination</code>
</td>
<td class="hdlist2">
<p>JMS destination name to consume inbound messages from.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>citrus.simulator.jms.reply-destination</code>
</td>
<td class="hdlist2">
<p>JMS destination name to publish outbound messages to.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can set these properties as system properties when starting the Spring Boot application, or you can add the properties to the default
Spring Boot application properties file, <code>application.properties</code>, located as a resource file in your project.</p>
</div>
<div class="paragraph">
<p>The simulator will automatically load these properties during startup and respect this configuration.</p>
</div>
</div>
<div class="sect3">
<h4 id="concept-simulator-environment-variables"><a class="anchor" href="#concept-simulator-environment-variables"></a><a class="link" href="#concept-simulator-environment-variables">1.2.2. Environment Variables</a></h4>
<div class="paragraph">
<p>The same settings that are editable via system properties are also accessible via environment variables.
This is extremely helpful when running the simulator in containerized infrastructure such as Docker or Kubernetes.</p>
</div>
<div class="hdlist">
<div class="title">Environment settings</div>
<table>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_CONFIGURATION_CLASS</code>
</td>
<td class="hdlist2">
<p>Java configuration class that is automatically loaded (default is org.citrusframework.simulator.SimulatorConfig).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_TEMPLATE_PATH</code>
</td>
<td class="hdlist2">
<p>Default path to message payload template files.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_DEFAULT_SCENARIO</code>
</td>
<td class="hdlist2">
<p>Default scenario name.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_DEFAULT_TIMEOUT</code>
</td>
<td class="hdlist2">
<p>Timeout when waiting for inbound messages.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_TEMPLATE_VALIDATION</code>
</td>
<td class="hdlist2">
<p>Enable/disable schema validation.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_EXCEPTION_DELAY</code>
</td>
<td class="hdlist2">
<p>Default delay in milliseconds to wait after uncategorized exceptions.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_EXECUTOR_THREADS</code>
</td>
<td class="hdlist2">
<p>The number of threads available for parallel scenario execution.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_REST_URL_MAPPINGS</code>
</td>
<td class="hdlist2">
<p>Handler adapter URL mappings for inbound requests.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_WS_SERVLET_MAPPINGS</code>
</td>
<td class="hdlist2">
<p>Message dispatcher servlet mappings for inbound SOAP requests.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_JMS_INBOUND_DESTINATION</code>
</td>
<td class="hdlist2">
<p>JMS destination name to consume inbound messages from.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CITRUS_SIMULATOR_JMS_REPLY_DESTINATION</code>
</td>
<td class="hdlist2">
<p>JMS destination name to publish outbound messages to.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If these environment variables are present on your local system, the simulator will automatically load these settings during startup and honor the configuration.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="concept-simulator-spring-configuration"><a class="anchor" href="#concept-simulator-spring-configuration"></a><a class="link" href="#concept-simulator-spring-configuration">1.3. Spring Bean Configuration</a></h3>
<div class="paragraph">
<p>Citrus operates within the Spring framework ecosystem, and the simulator is constructed as a Spring Boot application.
Consequently, configuration is primarily conducted through the addition and customization of Spring beans within the application context.
The simulator automatically loads Spring beans defined in the following locations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>META-INF/citrus-simulator.xml</strong> — An XML Spring bean configuration file.</p>
</li>
<li>
<p><strong>org.citrusframework.simulator.SimulatorConfig</strong> — A Java configuration class. You can tailor this class to your needs by specifying the property <strong>citrus.simulator.configuration.class</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All beans delineated within these files are seamlessly integrated into the simulator&#8217;s Spring application context upon loading. This process ensures that all necessary configurations are applied to facilitate the desired behavior of the simulator.
Furthermore, customizations and additional beans can be added to adapt to more complex scenarios or to extend the simulator&#8217;s capabilities beyond its default configuration set.</p>
</div>
</div>
<div class="sect2">
<h3 id="rest-api"><a class="anchor" href="#rest-api"></a><a class="link" href="#rest-api">1.4. REST API</a></h3>
<div class="paragraph">
<p>The simulator offers a comprehensive REST API for interacting with system entities.
The following resources are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/api/messages</code></p>
</li>
<li>
<p><code>/api/message-headers</code></p>
</li>
<li>
<p><code>/api/scenario-actions</code></p>
</li>
<li>
<p><code>/api/scenario-executions</code></p>
</li>
<li>
<p><code>/api/scenario-parameters</code></p>
</li>
<li>
<p><code>/api/test-parameters</code></p>
</li>
<li>
<p><code>/api/test-results</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each listed resource, the following operations are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Listing all entries with a <code>GET</code> request to the root URI.</p>
<div class="ulist">
<ul>
<li>
<p>Pagination and filtering are supported.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Counting all entries with a <code>GET /count</code> endpoint.</p>
<div class="ulist">
<ul>
<li>
<p>Note that the <code>?distinct=true</code> query parameter is required to count unique results.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Retrieving a single resource using the <code>GET /{id}</code> endpoint.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All REST resources adhere to this pattern, with exceptions noted in subsequent sections.</p>
</div>
<div class="paragraph">
<p>The endpoint <code>/api/test-results</code> additionally supports the <code>DELETE</code> request that removes all recorded Test Results and Executions.</p>
</div>
<div class="sect3">
<h4 id="receive-single-test-result"><a class="anchor" href="#receive-single-test-result"></a><a class="link" href="#receive-single-test-result">1.4.1. Receive SINGLE Test-Parameter</a></h4>
<div class="paragraph">
<p>A <code>TestParameter</code> is uniquely identified by a composite key, consisting of the <code>TestResult</code> ID and the <code>TestParameter</code> key.
To retrieve a single <code>TestParameter</code>, use the <code>GET /api/test-parameters/{testResultId}/{key}</code> endpoint. all recorded Test Results and Executions.</p>
</div>
</div>
<div class="sect3">
<h4 id="receive-scenario-execution-details"><a class="anchor" href="#receive-scenario-execution-details"></a><a class="link" href="#receive-scenario-execution-details">1.4.2. Receive Scenario Execution with Details</a></h4>
<div class="paragraph">
<p>The <code>ScenarioExecution</code> is also unique in regard to the amount of details that <em>could</em> be extracted from it.
However, more information (almost) always comes at the cost of performance.
Thus, the <code>/api/scenario-executions</code> endpoint offers four unique boolean query parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>includeActions</code>: When <code>true</code>, additionally fetches related <code>ScenarioAction</code></p>
</li>
<li>
<p><code>includeMessages</code>: When <code>true</code>, additionally fetches related <code>Message</code> (without <code>MessageHeader</code>)</p>
</li>
<li>
<p><code>includeMessageHeaders</code>: When <code>true</code>, additionally fetches related <code>Message</code> and <code>MessageHeaders</code></p>
</li>
<li>
<p><code>includeParameters</code>: When <code>true</code>, additionally fetches related <code>ScenarioParameter</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>They are all being set to <code>false</code> by default.</p>
</div>
</div>
<div class="sect3">
<h4 id="scenario-resource"><a class="anchor" href="#scenario-resource"></a><a class="link" href="#scenario-resource">1.4.3. Scenario Resource</a></h4>
<div class="paragraph">
<p>The <code>Scenario</code> resource is an exception to the standard pattern.
The <code>GET /</code> endpoint returns a list of scenarios with their unique names and types, indicating whether it&#8217;s a <code>SimulatorScenario</code> (<code>MESSAGE_TRIGGERED</code>) or a <code>ScenarioStarter</code> (<code>STARTER</code>).
This resource supports pagination, sorting and simple filtering.</p>
</div>
<div class="paragraph">
<p>Use the optional query parameter <code>nameContains</code> to filter scenarios by name containing the given value - case-sensitive!</p>
</div>
<div class="paragraph">
<p>This resource does not have a single resource endpoint, as scenarios are identified by name, which provides sufficient detail.
However, you can view a scenario&#8217;s parameters with the <code>GET /{scenarioName}/parameters</code> endpoint or launch scenarios with the <code>POST /{scenarioName}/launch</code> endpoint, which accepts an array of parameters in the request body.</p>
</div>
</div>
<div class="sect3">
<h4 id="rest-api-pagination"><a class="anchor" href="#rest-api-pagination"></a><a class="link" href="#rest-api-pagination">1.4.4. Pagination</a></h4>
<div class="paragraph">
<p>All <code>GET</code> endpoints retrieving lists of resources support pagination.
This allows clients to request subsets of records for easier navigation and processing.</p>
</div>
<div class="ulist">
<div class="title">Query Parameters</div>
<ul>
<li>
<p><code>page</code>: Page index, starting at 0.</p>
</li>
<li>
<p><code>size</code>: Number of records per page.</p>
</li>
<li>
<p><code>sort</code>: Sorting criteria in the format <code>property,(asc|desc)</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Request Example</div>
<p>To retrieve the first page with 10 records sorted by <code>id</code> in ascending order:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>GET http://localhost:9000/api/{resource}?page=0&amp;size=10&amp;sort=id,asc</pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>{resource}</code> with the appropriate resource name, see <a href="#rest-api">REST API</a>.</p>
</div>
<div class="paragraph">
<div class="title">Paginated Response Structure</div>
<p>Responses include pagination metadata in the HTTP <code>Link</code> header, in addition to the response body.
For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>First page: <code>&lt;<a href="http://localhost:9000/api/{resource}?page=0&amp;size=10&amp;sort=id,asc&gt;" class="bare">http://localhost:9000/api/{resource}?page=0&amp;size=10&amp;sort=id,asc&gt;</a>; rel="first"</code></p>
</li>
<li>
<p>Last page: <code>&lt;<a href="http://localhost:9000/api/{resource}?page=9&amp;size=10&amp;sort=id,asc&gt;" class="bare">http://localhost:9000/api/{resource}?page=9&amp;size=10&amp;sort=id,asc&gt;</a>; rel="last"</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="rest-api-filtering"><a class="anchor" href="#rest-api-filtering"></a><a class="link" href="#rest-api-filtering">1.4.5. Filtering</a></h4>
<div class="paragraph">
<p>All <code>GET</code> endpoints retrieving lists of resources support attribute-based filtering.
This allows for refined searches based on the attributes of the REST resource.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s consider a simplified version of the <a href="https://github.com/citrusframework/citrus-simulator/blob/main/simulator-starter/src/main/java/org/citrusframework/simulator/model/ScenarioExecution.java"><code>ScenarioExecution</code> entity</a> as an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Entity</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">ScenarioExecution</span> <span class="directive">implements</span> <span class="predefined-type">Serializable</span> {

    <span class="directive">private</span> <span class="predefined-type">Long</span> executionId;
    <span class="directive">private</span> <span class="predefined-type">Integer</span> status = Status.UNKNOWN.getId();
    <span class="directive">private</span> <span class="directive">final</span> <span class="predefined-type">Set</span>&lt;ScenarioAction&gt; scenarioActions = <span class="keyword">new</span> <span class="predefined-type">HashSet</span>&lt;&gt;();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To filter all successful executions, you can use the following query parameter: <code>?status=2</code>.
To retrieve a single execution by its ID: <code>?executionId=1234</code>.</p>
</div>
<div class="paragraph">
<p>Filtering across relationships is also possible.
For instance, to find all executions associated with a specific action, the query parameter would be: <code>?scenarioActionsId.in=1234</code>.</p>
</div>
<div class="paragraph">
<p>For more advanced filtering options, please refer to the <a href="https://github.com/citrusframework/citrus-simulator/tree/main/simulator-starter/src/main/java/org/citrusframework/simulator/service/criteria">criteria documentation</a>.</p>
</div>
<div class="paragraph">
<div class="title">Range Filter</div>
<p>Numerical and date-related values support the following filters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>?fieldName=42</code> or <code>?fieldName.equals=42</code> for exact matches.</p>
</li>
<li>
<p><code>?fieldName.notEquals=42</code> for exclusion.</p>
</li>
<li>
<p><code>?fieldName.specified=true</code> to find records where <code>fieldName</code> is not null.</p>
</li>
<li>
<p><code>?fieldName.in=43,42</code> for inclusion in a list.</p>
</li>
<li>
<p><code>?fieldName.notIn=43,42</code> for exclusion from a list.</p>
</li>
<li>
<p><code>?fieldName.greaterThan=41</code> for values greater than the specified number.</p>
</li>
<li>
<p><code>?fieldName.lessThan=44</code> for values less than the specified number.</p>
</li>
<li>
<p><code>?fieldName.greaterThanOrEqual=42</code> for values greater or equal to the specified number.</p>
</li>
<li>
<p><code>?fieldName.lessThanOrEqual=44</code> for values less or equal to the specified number.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">String Filter</div>
<p>String attributes support the following filters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>?fieldName=something</code> or <code>?fieldName.equals=something</code> for exact matches.</p>
</li>
<li>
<p><code>?fieldName.notEquals=something</code> for exclusion.</p>
</li>
<li>
<p><code>?fieldName.in=something,other</code> for inclusion in a list.</p>
</li>
<li>
<p><code>?fieldName.notIn=something,other</code> for exclusion from a list.</p>
</li>
<li>
<p><code>?fieldName.contains=thing</code> for substring matches.</p>
</li>
<li>
<p><code>?fieldName.doesNotContain=thing</code> for exclusion of substring matches.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Remember to URL-encode query parameters to ensure proper handling of special characters and spaces.</p>
</div>
<div class="sect4">
<h5 id="rest-api-filtering-scenario-execution"><a class="anchor" href="#rest-api-filtering-scenario-execution"></a><a class="link" href="#rest-api-filtering-scenario-execution">1.4.5.1. Scenario Executions</a></h5>
<div class="paragraph">
<p>The scenario execution filter has one special parameter called <code>headers</code> that accepts a very specific syntax.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you don&#8217;t specify a key or comparator, the filter will search for messages where <strong>any</strong> header value <strong>contains</strong> the provided string. (e.g., <code>myValue</code>)</p>
</li>
<li>
<p>To filter based on a <strong>specific key</strong>, use key=value. (e.g., <code>source=myApp</code>)</p>
</li>
<li>
<p>You can also use the <strong>CONTAINS</strong> operator (<code>~</code>) to search within a key&#8217;s value. (e.g., <code>name~something-like-this</code>)</p>
</li>
<li>
<p>For numeric keys, you can use comparison operators like <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>. (e.g., <code>priority&gt;3</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Combining multiple patterns:</strong> Separate multiple filter expressions with a semicolon (;).
They will be combined using logical <strong>AND</strong> operators.
(e.g., <code>source=myApp; status=active</code>)</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="scenario-mapper"><a class="anchor" href="#scenario-mapper"></a><a class="link" href="#scenario-mapper">1.5. Scenario Mapper</a></h3>
<div class="paragraph">
<p>The scenario mapper implementation determines the association between incoming request messages and simulator scenarios.
For each incoming request, a predefined scenario is triggered, which in turn generates the response message for the client.
The scenario is selected based on a mapping key, which is extracted from the incoming request.</p>
</div>
<div class="paragraph">
<p>The simulator utilizes several methods to ascertain the correct scenario from incoming request messages:</p>
</div>
<div class="hdlist">
<div class="title">Scenario mapping identifiers</div>
<table>
<tr>
<td class="hdlist1">
Message-Type
</td>
<td class="hdlist2">
<p>Differentiates scenarios based on the request message type (XML root QName).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Content based Xpath
</td>
<td class="hdlist2">
<p>Applies Xpath expressions to the request payload, using the result as the scenario identifier.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Content based JsonPath
</td>
<td class="hdlist2">
<p>Applies JsonPath expressions to the request payload, using the result as the scenario identifier.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Header value
</td>
<td class="hdlist2">
<p>Determines the scenario based on a specific header value in the request.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
SOAP action
</td>
<td class="hdlist2">
<p>Selects the scenario according to the SOAP action header in the request.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
REST request mappings
</td>
<td class="hdlist2">
<p>Chooses the scenario based on the HTTP method and resource path.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
Request mapping annotations
</td>
<td class="hdlist2">
<p>Employs Spring <code>@RequestMapping</code> annotations to map requests to scenarios based on method and path values.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When a scenario is identified using a specific mapping key, it is subsequently loaded and executed.
Each scenario performs test logic, as defined by Citrus, to provide a suitable response message.
Through this mechanism, the simulator can generate complex and dynamic responses.</p>
</div>
<div class="paragraph">
<p>The following classes implement the various scenario mapping strategies:</p>
</div>
<div class="hdlist">
<div class="title">Scenario mapper implementations</div>
<table>
<tr>
<td class="hdlist1">
<code>HttpRequestAnnotationScenarioMapper</code>
</td>
<td class="hdlist2">
<p>Assesses REST request mappings.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>SoapActionScenarioMapper</code>
</td>
<td class="hdlist2">
<p>Analyzes the SOAP action header.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>HeaderValueScenarioMapper</code>
</td>
<td class="hdlist2">
<p>Evaluates message headers.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ContentBasedXPathScenarioMapper</code>
</td>
<td class="hdlist2">
<p>Applies an XPath expression to the message payload.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ContentBasedJsonPathScenarioMapper</code>
</td>
<td class="hdlist2">
<p>Applies a JsonPath expression to the message payload.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Custom scenario mapper implementations are also possible.
To introduce a custom mapper, one simply implements the interface methods of the corresponding API and incorporates the custom class into the simulator configuration, as will be detailed later in this documentation.</p>
</div>
<div class="sect3">
<h4 id="scenario-mapper-default"><a class="anchor" href="#scenario-mapper-default"></a><a class="link" href="#scenario-mapper-default">1.5.1. Default Mapping Behavior</a></h4>
<div class="paragraph">
<p>By default, the mapping key is derived from the type of message in incoming requests, via an XPath expression targeting the root element of the message.
This unique element dictates the simulator scenario to be invoked.</p>
</div>
<div class="paragraph">
<p>For example, consider three message types: <strong>successMessage</strong>, <strong>warningMessage</strong>, and <strong>errorMessage</strong>.
A corresponding simulator scenario is crafted for each message type, named accordingly.
Incoming requests such as those below will prompt the simulator to select and execute the appropriate scenario:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;successMessage&gt;</span>
    <span class="tag">&lt;text&gt;</span>This is a success message<span class="tag">&lt;/text&gt;</span>
<span class="tag">&lt;/successMessage&gt;</span>

<span class="tag">&lt;warningMessage&gt;</span>
    <span class="tag">&lt;text&gt;</span>This is a warning message<span class="tag">&lt;/text&gt;</span>
<span class="tag">&lt;/warningMessage&gt;</span>

<span class="tag">&lt;errorMessage&gt;</span>
    <span class="tag">&lt;text&gt;</span>This is an error message<span class="tag">&lt;/text&gt;</span>
<span class="tag">&lt;/errorMessage&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The root element name of each request is evaluated by the simulator to map to the respective scenario.
Each scenario yields a distinct logic for response generation, enabling tailored responses to different message types like <strong>successMessage</strong> as opposed to <strong>errorMessage</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="scenario-mapper-configuration"><a class="anchor" href="#scenario-mapper-configuration"></a><a class="link" href="#scenario-mapper-configuration">1.5.2. Custom Mapper Configuration</a></h4>
<div class="paragraph">
<p>The default scenario mapper can be replaced with a custom configuration in your simulator:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Component</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">SimulatorAdapter</span> <span class="directive">extends</span> SimulatorRestAdapter {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> ScenarioMapper scenarioMapper() {
        HeaderValueScenarioMapper scenarioMapper = <span class="keyword">new</span> HeaderValueScenarioMapper();
        scenarioMapper.setHeaderName(<span class="string"><span class="delimiter">&quot;</span><span class="content">X-simulator-scenario</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">return</span> scenarioMapper;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the configuration example above, the <code>HeaderValueScenarioMapper</code> is utilized, which assesses the value of the header <code>X-simulator-scenario</code> for each incoming request message.
The scenario executed corresponds to the value of this header.
As a bean in the Spring application context, the scenario mapper comes with a default implementation, but it can be overridden in the simulator adapter configuration.
For further details on adding simulator adapter configuration classes, see the configuration chapters <a href="#rest-config">REST configuration</a>, <a href="#web-service-config">WS configuration</a>, <a href="#jms-config">JMS configuration</a> and <a href="#endpoint-config">endpoint configuration</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="scenarios"><a class="anchor" href="#scenarios"></a><a class="link" href="#scenarios">1.6. Simulator Scenarios</a></h3>
<div class="paragraph">
<p>Simulator scenarios are defined to generate responses for incoming requests, with each scenario corresponding to distinct logic and messages.
A scenario first assigns a name for identification by mapping strategies.
It is represented by a Java class implementing the <code>SimulatorScenario</code> interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.citrusframework.simulator.scenario</span>;

<span class="directive">public</span> <span class="type">interface</span> <span class="class">SimulatorScenario</span> {

    ScenarioEndpoint getScenarioEndpoint();

    <span class="keyword">default</span> <span class="type">void</span> run(ScenarioRunner runner) {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Scenarios grant access to the invoked endpoint and allow message transactions through it.
Default run methods determine the logic execution pathway, depending on the desired Java DSL API.
Inheriting from <code>org.citrusframework.simulator.scenario.AbstractSimulatorScenario</code> is typical for simplifying scenario creation.</p>
</div>
<div class="paragraph">
<p>Consider the example below for a standard scenario.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloScenario</span> <span class="directive">extends</span> AbstractSimulatorScenario {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.<span class="error">$</span>(scenario.soap()
            .receive()
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;Hello xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Say Hello!</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/Hello&gt;</span><span class="delimiter">&quot;</span></span>)
            .soapAction(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>));

        scenario.<span class="error">$</span>(scenario.soap()
            .send()
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;HelloResponse xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi there!</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/HelloResponse&gt;</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By extending <code>AbstractSimulatorScenario</code>, we insert receive and send logic into the run method.
The <code>@Scenario</code> annotation defines the scenario name.
Citrus Java DSL methods facilitate message handling in the implementation.</p>
</div>
<div class="paragraph">
<p>Dynamic value extraction from requests for use in responses is also supported:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloScenario</span> <span class="directive">extends</span> AbstractSimulatorScenario {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.<span class="error">$</span>(scenario.soap()
            .receive()
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;Hello xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;user&gt;@ignore@&lt;/user&gt;</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/Hello&gt;</span><span class="delimiter">&quot;</span></span>)
            .extract(fromBody().expression(<span class="string"><span class="delimiter">&quot;</span><span class="content">/Hello/user</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">userName</span><span class="delimiter">&quot;</span></span>)));

        scenario.<span class="error">$</span>(scenario.soap()
            .send()
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;HelloResponse xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;text&gt;Hi there ${userName}!&lt;/text&gt;</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/HelloResponse&gt;</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>${userName}</code> variable is derived from the request and used to personalize the response.
This approach leverages Citrus&#8217;s capability to create dynamic responses.
Both XML, JSON, and Plaintext payload types are supported by this dynamic mechanism.</p>
</div>
<div class="paragraph">
<p>Writing various scenarios enables the generation of diverse responses, with unique scenario names linked to values determined by the scenario mapper.
This setup allows for the creation of scenarios specific to incoming request messages.
Additionally, Citrus&#8217;s send and receive operations handle messages across different transport types.</p>
</div>
<div class="paragraph">
<p>For more information on message transport support, see the chapters <a href="#rest-config">REST configuration</a>, <a href="#web-service-config">WS configuration</a>, <a href="#jms-config">JMS configuration</a> and <a href="#endpoint-config">endpoint configuration</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="intermediate-messages"><a class="anchor" href="#intermediate-messages"></a><a class="link" href="#intermediate-messages">1.7. Intermediate Messages</a></h3>
<div class="paragraph">
<p>The simulator starts a new <a href="#scenarios">scenario</a> instance for each incoming request based on the defined <a href="#scenario-mapper">scenario mapping</a>.
Sometimes a running scenario instance needs to receive another incoming request.
In such cases, the simulator handles the process differently, as the incoming request should not trigger a new scenario instance but should be forwarded to the running scenario.</p>
</div>
<div class="paragraph">
<p>This process is referred to as intermediate message handling within scenarios.
A scenario can activate message correlation for specific requests.
Before initiating a new scenario, the simulator always checks all running scenarios for matches with intermediate message correlations.
This allows us to receive additional incoming requests within the same scenario instance.</p>
</div>
<div class="paragraph">
<p>To explain this concept, consider the following simple example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">GoodNight</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">GoodNightScenario</span> <span class="directive">extends</span> AbstractSimulatorScenario {

    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> CORRELATION_ID = <span class="string"><span class="delimiter">&quot;</span><span class="content">x-correlationid</span><span class="delimiter">&quot;</span></span>;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.<span class="error">$</span>(scenario.http()
            .receive()
            .post()
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;GoodNight xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Go to sleep!</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/GoodNight&gt;</span><span class="delimiter">&quot;</span></span>)
            .extract(fromHeaders().header(CORRELATION_ID, <span class="string"><span class="delimiter">&quot;</span><span class="content">correlationId</span><span class="delimiter">&quot;</span></span>)
            ));

        scenario.<span class="error">$</span>(correlation().start()
            .onHeader(CORRELATION_ID, <span class="string"><span class="delimiter">&quot;</span><span class="content">${correlationId}</span><span class="delimiter">&quot;</span></span>)
        );

        scenario.<span class="error">$</span>(scenario.http()
            .send()
            .response(HttpStatus.OK)
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;GoodNightResponse xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Good Night!</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/GoodNightResponse&gt;</span><span class="delimiter">&quot;</span></span>));

        scenario.<span class="error">$</span>(scenario.http()
            .receive()
            .post()
            .selector(<span class="string"><span class="delimiter">&quot;</span><span class="content">x-correlationid = '1${correlationId}'</span><span class="delimiter">&quot;</span></span>)
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;InterveningRequest&gt;In between!&lt;/InterveningRequest&gt;</span><span class="delimiter">&quot;</span></span>));

        scenario.<span class="error">$</span>(scenario.http()
            .send()
            .response(HttpStatus.OK)
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;InterveningResponse&gt;In between!&lt;/InterveningResponse&gt;</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the scenario above, a new correlation starts on the header entry <code>X-CorrelationId</code> and the variable value <code>${correlationId}</code> extracted from the first request.
This allows the scenario to receive further incoming request messages with the correlation identifier, ensuring it receives the specific message first, before any other running scenarios.</p>
</div>
<div class="paragraph">
<p>This mechanism enables a scenario instance to handle more than one incoming request.
Message correlation can be based on header values or XPath expressions evaluated within the message payload.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">FaxCancelled</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">FaxCancelledScenario</span> <span class="directive">extends</span> AbstractFaxScenario {

    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> ROOT_ELEMENT_XPATH = <span class="string"><span class="delimiter">&quot;</span><span class="content">string:local-name(/*)</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> REFERENCE_ID_XPATH = <span class="string"><span class="delimiter">&quot;</span><span class="content">//fax:referenceId</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> REFERENCE_ID_VAR = <span class="string"><span class="delimiter">&quot;</span><span class="content">referenceId</span><span class="delimiter">&quot;</span></span>;
    <span class="directive">public</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> REFERENCE_ID_PH = <span class="string"><span class="delimiter">&quot;</span><span class="content">${referenceId}</span><span class="delimiter">&quot;</span></span>;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.<span class="error">$</span>(scenario.receive()
            .message()
            .validate(xpath().expression(ROOT_ELEMENT_XPATH, <span class="string"><span class="delimiter">&quot;</span><span class="content">SendFaxMessage</span><span class="delimiter">&quot;</span></span>))
            .extract(
                fromBody().expression(REFERENCE_ID_XPATH, REFERENCE_ID_VAR)));

        scenario.<span class="error">$</span>(correlation().start()
            .onPayload(REFERENCE_ID_XPATH, REFERENCE_ID_PH));

        scenario.<span class="error">$</span>(send()
            .endpoint(getStatusEndpoint())
            .message()
            .body(
                <span class="keyword">new</span> MarshallingPayloadBuilder(
                    getPayloadHelper().generateFaxStatusMessage(
                        REFERENCE_ID_PH,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">QUEUED</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">The fax message has been queued and will be send shortly</span><span class="delimiter">&quot;</span></span>
                    ),
                    getPayloadHelper().getMarshaller())
            ));

        scenario.<span class="error">$</span>(scenario.receive()
            .message()
            .validate(xpath()
                .expression(ROOT_ELEMENT_XPATH, <span class="string"><span class="delimiter">&quot;</span><span class="content">CancelFaxMessage</span><span class="delimiter">&quot;</span></span>)
                .expression(REFERENCE_ID_XPATH, REFERENCE_ID_PH)));

        scenario.<span class="error">$</span>(send()
            .endpoint(getStatusEndpoint())
            .message()
            .body(
                <span class="keyword">new</span> MarshallingPayloadBuilder(
                    getPayloadHelper().generateFaxStatusMessage(
                        REFERENCE_ID_PH,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">CANCELLED</span><span class="delimiter">&quot;</span></span>,
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">The fax message has been cancelled</span><span class="delimiter">&quot;</span></span>
                    ),
                    getPayloadHelper().getMarshaller())
            ));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above example uses XPath expressions to establish a new correlation within the scenario.
This ensures that the second incoming request <code>CancelFaxMessage</code> is directed to the same scenario instance.</p>
</div>
<div class="paragraph">
<p>Intermediate message handling enables the creation of complex scenarios that involve multiple request-response interactions.
Message correlation ensures that the relevant requests are processed within the same scenario, without interference from other concurrent scenarios.</p>
</div>
</div>
<div class="sect2">
<h3 id="simulations-error-handling"><a class="anchor" href="#simulations-error-handling"></a><a class="link" href="#simulations-error-handling">1.8. Simulation Errors Handling</a></h3>
<div class="paragraph">
<p>It might be possible that unexpected errors occur during simulations.
But how would you know that this is the case, you might ask yourself?
It could as well be, that someone just <strong>wanted</strong> this simulation to respond with an HTTP 500 code.</p>
</div>
<div class="paragraph">
<p>That&#8217;s why we&#8217;ve invented the custom HTTP 555 status code: Simulation failed with an Exception!</p>
</div>
<div class="paragraph">
<p>The error can be asserted from the client side, the body containing more detailed information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="type">class</span> <span class="class">SimulatorRestIT</span> {

    <span class="comment">/**
     * Sends a request to the server, expecting it to execute a simulation. The response should indicate the unexpected
     * error, returning a {@link HttpStatus#INTERNAL_SERVER_ERROR}.
     *
     * @see org.citrusframework.simulator.sample.scenario.ThrowScenario
     */</span>
    <span class="annotation">@CitrusTest</span>
    <span class="directive">public</span> <span class="type">void</span> testSimulationWithUnexpectedError() {
        <span class="error">$</span>(http().client(simulatorClient)
            .send()
            .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">throw</span><span class="delimiter">&quot;</span></span>)
            .message()
            .accept(MediaType.APPLICATION_JSON_VALUE));

        <span class="error">$</span>(http().client(simulatorClient)
            .receive()
            .response(HttpStatus.INTERNAL_SERVER_ERROR)
            .message()
            .body(
                <span class="comment">// language=json</span>
                <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="content">
                    {
                      </span><span class="delimiter">&quot;</span></span>timestamp<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span><span class="annotation">@ignore</span><span class="error">@</span><span class="string"><span class="delimiter">&quot;</span><span class="content">,
                      </span><span class="delimiter">&quot;</span></span>status<span class="string"><span class="delimiter">&quot;</span><span class="content">:555,
                      </span><span class="delimiter">&quot;</span></span>error<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>Http Status <span class="integer">555</span><span class="string"><span class="delimiter">&quot;</span><span class="content">,
                      </span><span class="delimiter">&quot;</span></span>path<span class="string"><span class="delimiter">&quot;</span><span class="content">:</span><span class="delimiter">&quot;</span></span>/services/rest/simulator/<span class="keyword">throw</span><span class="string"><span class="delimiter">&quot;</span><span class="content">
                    }
                    </span><span class="delimiter">&quot;</span></span><span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>
            ));
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="advanced-concepts"><a class="anchor" href="#advanced-concepts"></a><a class="link" href="#advanced-concepts">2. Advanced Concepts</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="advanced-concepts-execution-modes"><a class="anchor" href="#advanced-concepts-execution-modes"></a><a class="link" href="#advanced-concepts-execution-modes">2.1. Execution Modes in Citrus Simulator</a></h3>
<div class="paragraph">
<p>The Citrus Simulator offers different modes of operation to accommodate various testing scenarios and requirements.
These modes dictate how the simulator executes the test scenarios.
It comes with two modes, a synchronous and an asynchronous one, providing flexibility in how interactions are simulated and tested.</p>
</div>
<div class="sect3">
<h4 id="advanced-concepts-execution-sync-mode"><a class="anchor" href="#advanced-concepts-execution-sync-mode"></a><a class="link" href="#advanced-concepts-execution-sync-mode">2.1.1. Synchronous Execution Mode</a></h4>
<div class="paragraph">
<p>The synchronous execution mode ensures that scenarios are executed one after the other, in a single thread.
This mode is beneficial for scenarios where operations need to be performed in a strict sequence, and data consistency is crucial.</p>
</div>
<div class="sect4">
<h5 id="configuration"><a class="anchor" href="#configuration"></a><a class="link" href="#configuration">2.1.1.1. Configuration</a></h5>
<div class="paragraph">
<p>To configure the simulator in synchronous mode, set the <code>citrus.simulator.mode</code> property in your application&#8217;s configuration file (<code>application.properties</code> or <code>application.yml</code>) to <code>sync</code>.
If this property is not set at all, the simulator defaults to synchronous mode.</p>
</div>
<div class="listingblock">
<div class="title">Example <code>application.properties</code></div>
<div class="content">
<pre>citrus.simulator.mode=sync</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example <code>application.yml</code></div>
<div class="content">
<pre>citrus:
  simulator:
    mode: sync</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="advanced-concepts-execution-async-mode"><a class="anchor" href="#advanced-concepts-execution-async-mode"></a><a class="link" href="#advanced-concepts-execution-async-mode">2.1.2. Asynchronous Execution Mode</a></h4>
<div class="paragraph">
<p>In asynchronous execution mode, scenarios are executed concurrently in separate threads, allowing for parallel processing.
This mode is suitable for more complex simulations where scenarios do not depend on the execution order or when simulating high concurrency.</p>
</div>
<div class="sect4">
<h5 id="configuration-2"><a class="anchor" href="#configuration-2"></a><a class="link" href="#configuration-2">2.1.2.1. Configuration</a></h5>
<div class="paragraph">
<p>To enable asynchronous mode, set the <code>citrus.simulator.mode</code> property to <code>async</code>.
Additionally, you can configure the number of executor threads that handle the parallel execution of scenarios through the <code>citrus.simulator.executor.threads</code> property.</p>
</div>
<div class="listingblock">
<div class="title">Example <code>application.properties</code></div>
<div class="content">
<pre>citrus.simulator.mode=async
citrus.simulator.executor.threads=10</pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example <code>application.yml</code></div>
<div class="content">
<pre>citrus:
  simulator:
    mode: async
    executor:
      threads: 10</pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="advanced-concepts-execution-custom-mode"><a class="anchor" href="#advanced-concepts-execution-custom-mode"></a><a class="link" href="#advanced-concepts-execution-custom-mode">2.1.3. Custom Executors</a></h4>
<div class="paragraph">
<p>For advanced scenarios, you have the flexibility to provide custom executors by implementing the <code>ScenarioExecutorService</code> interface.
This allows for tailored execution strategies, such as custom thread management, prioritization of scenarios, or integration with external systems for scenario execution.</p>
</div>
<div class="paragraph">
<p>To use a custom executor, define your implementation of the <code>ScenarioExecutorService</code> and register it as a bean in your Spring application context.
Ensure that your custom executor is appropriately configured to be recognized by the simulator in place of the default synchronous or asynchronous executors.
To disable the default synchronous executor, set the following property: <code>citrus.simulator.mode=custom</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example Custom Executor Bean Definition</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> ScenarioExecutorService customScenarioExecutorService() {
    <span class="keyword">return</span> <span class="keyword">new</span> MyCustomScenarioExecutorService();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This custom executor will then be used by the simulator to execute scenarios according to the logic you&#8217;ve implemented.</p>
</div>
</div>
<div class="sect3">
<h4 id="advanced-concepts-execution-mode-best-practices"><a class="anchor" href="#advanced-concepts-execution-mode-best-practices"></a><a class="link" href="#advanced-concepts-execution-mode-best-practices">2.1.4. Best Practices</a></h4>
<div class="ulist">
<ul>
<li>
<p>Use the <em>synchronous mode</em> as the standard, for linear simulations where data consistency matters or when debugging to ensure straightforward tracing of actions and outcomes.</p>
</li>
<li>
<p>Opt for the <em>asynchronous mode</em> only when explicitly needed, when simulating more complex scenarios that involve intermediate synchronous messages.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By understanding and appropriately configuring the execution modes of the Citrus Simulator, you can tailor the simulation environment to best suit your testing needs, whether you require precise control over scenario execution or need to simulate high-volume, concurrent interactions.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="advanced-concepts-database-schema"><a class="anchor" href="#advanced-concepts-database-schema"></a><a class="link" href="#advanced-concepts-database-schema">2.2. Database Schema</a></h3>
<div class="paragraph">
<p>In some cases, it may be useful to keep the database schema in mind.
The following diagram illustrates the database schema as defined in the package <code>org.citrusframework.simulator.model</code>, which should be considered the source of truth.
This visual representation can help understand the relationships and structure of the database entities.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/database-schema.png" alt="Database Schema">
</div>
<div class="title">Figure 1. Database Schema of the Citrus Simulator</div>
</div>
</div>
<div class="sect2">
<h3 id="advanced-concepts-scenario-cache"><a class="anchor" href="#advanced-concepts-scenario-cache"></a><a class="link" href="#advanced-concepts-scenario-cache">2.3. Scenario Cache</a></h3>
<div class="paragraph">
<p>Registering simulator scenarios at runtime is a perfectly valid approach.
However, it&#8217;s crucial to ensure that the scenario cache used by the simulator remains synchronized.</p>
</div>
<div class="paragraph">
<p>A "Scenario" in this context is not a database entity but rather a conceptual object that exists only during runtime.
Essentially, these are simply Spring beans.
The <code>ScenarioLookupService</code> is responsible for tracking these scenarios but cannot do so automatically.
Therefore, after making modifications, it&#8217;s necessary to call <code>ScenarioLookupService#evictAndReloadScenarioCache()</code> to update the cache.</p>
</div>
<div class="paragraph">
<p>The following Java source code illustrates how to register a custom scenario and update the scenario cache:</p>
</div>
<div class="listingblock">
<div class="title">Custom Scenario Bean Registration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.citrusframework.simulator.service.ScenarioLookupService</span>;
<span class="keyword">import</span> <span class="include">org.springframework.beans.factory.config.ConfigurableListableBeanFactory</span>;
<span class="keyword">import</span> <span class="include">org.springframework.context.ApplicationContext</span>;
<span class="keyword">import</span> <span class="include">org.springframework.context.annotation.Configuration</span>;

<span class="annotation">@Configuration</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MyCustomBeanConfiguration</span> {

    <span class="directive">public</span> MyCustomBeanConfiguration(ApplicationContext applicationContext, ScenarioLookupService scenarioLookupService) {
        <span class="comment">// Replace 'MyCustomSimulatorScenario' with your custom scenario class</span>
        SimulatorScenario simulatorScenario = <span class="keyword">new</span> MyCustomSimulatorScenario();

        ConfigurableListableBeanFactory beanFactory = ((ConfigurableApplicationContext) applicationContext).getBeanFactory();
        beanFactory.registerSingleton(simulatorScenario.getClass().getSimpleName(), simulatorScenario);

        scenarioLookupService.evictAndReloadScenarioCache();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="advanced-concepts-housekeeping"><a class="anchor" href="#advanced-concepts-housekeeping"></a><a class="link" href="#advanced-concepts-housekeeping">2.4. Housekeeping</a></h3>
<div class="paragraph">
<p>The Simulator has the ability to reset all recorded Test Results and Executions, either using the <a href="#rest-api">REST API</a> or <a href="#user-interface-integration">User Interface</a>.
This functionality is useful for smaller and/or ephemeral simulations, but can be problematic for long-lived or even central services.
In such cases, it is recommended to switch the endpoint off and set up your own housekeeping.</p>
</div>
<div class="paragraph">
<p>To disable the functionality in both back- and frontend, configure the below property in the Spring Boot configuration files:</p>
</div>
<div class="listingblock">
<div class="title">Example <code>application.properties</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">citrus.simulator.simulation-results.reset-enabled=false</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example <code>application.yml</code></div>
<div class="content">
<pre>citrus:
  simulator:
    test-results:
        reset-enabeld: false</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rest"><a class="anchor" href="#rest"></a><a class="link" href="#rest">3. REST Support</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Citrus simulator can serve as an Http REST API server, handling client requests using HTTP methods such as GET, POST, PUT, DELETE, etc.</p>
</div>
<div class="paragraph">
<p>Enable generic REST support by setting the property <code>citrus.simulator.rest.enabled=true</code> in the <code>application.properties</code> file or via system property or environment variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Setting <code>citrus.simulator.rest.enabled</code> triggers autoconfiguration steps and loads the required beans into the Spring application context.</p>
</div>
<div class="sect2">
<h3 id="rest-config"><a class="anchor" href="#rest-config"></a><a class="link" href="#rest-config">3.1. Configuration</a></h3>
<div class="paragraph">
<p>With REST support enabled, various configuration options are available, typically via a <code>SimulatorRestAdapter</code> implementation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">SimulatorRestAdapter</span> <span class="directive">implements</span> SimulatorRestConfigurer {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ScenarioMapper scenarioMapper() {
        <span class="keyword">return</span> <span class="keyword">new</span> HttpRequestAnnotationScenarioMapper();
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> HandlerInterceptor<span class="type">[]</span> interceptors() {
        <span class="keyword">return</span> <span class="keyword">new</span> HandlerInterceptor<span class="type">[]</span> { <span class="keyword">new</span> LoggingHandlerInterceptor() };
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; urlMappings() {
        <span class="keyword">return</span> singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">/services/rest/**</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The adapter allows customization of REST handling, such as implementing different scenario mappers or adding handler interceptors.</p>
</div>
<div class="paragraph">
<p><strong>Note</strong>: By default, the REST support uses the <code>HttpRequestAnnotationScenarioMapper</code> to search for <code>@RequestMapping</code> annotations on scenario classes.</p>
</div>
<div class="paragraph">
<p>The <code>urlMappings</code> method defines the access path to the simulator&#8217;s REST API.
Assuming the Spring Boot application runs on port 8080, the API would be accessible at:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>http://localhost:8080/services/rest/*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Clients can send requests like GET, POST, DELETE to this endpoint, and the simulator will respond based on the executed scenario.</p>
</div>
<div class="paragraph">
<p>Customize the simulator REST support by extending <code>SimulatorRestAdapter</code> in a custom class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Component</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MySimulatorRestAdapter</span> <span class="directive">extends</span> SimulatorRestAdapter {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; urlMappings() {
        <span class="keyword">return</span> singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">/my-rest-service/**</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Annotate your custom class with <code>@Component</code> to override the default REST adapter behavior.
Now, the REST API will be accessible at <code><a href="http://localhost:8080/my-rest-service/*" class="bare">http://localhost:8080/my-rest-service/*</a></code>.</p>
</div>
<div class="paragraph">
<p>Extend the adapter directly in the main application class for further customizations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.citrusframework.simulator.http.SimulatorRestAdapter</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> <span class="directive">extends</span> SimulatorRestAdapter {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; urlMappings() {
        <span class="keyword">return</span> singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">/my-rest-service/**</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ScenarioMapper scenarioMapper() {
        HeaderValueScenarioMapper scenarioMapper = <span class="keyword">new</span> HeaderValueScenarioMapper();
        scenarioMapper.setHeaderName(<span class="string"><span class="delimiter">&quot;</span><span class="content">X-simulator-scenario</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">return</span> scenarioMapper;
    }

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rest-customization"><a class="anchor" href="#rest-customization"></a><a class="link" href="#rest-customization">3.2. Advanced Customizations</a></h3>
<div class="paragraph">
<p>For more advanced configurations, extend <code>SimulatorRestSupport</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.citrusframework.simulator.http.SimulatorRestAutoConfiguration</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> <span class="directive">extends</span> SimulatorRestAutoConfiguration {

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="predefined-type">String</span> getUrlMapping() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">/my-rest-service/**</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> FilterRegistrationBean requestCachingFilter() {
        FilterRegistrationBean filterRegistrationBean = <span class="keyword">new</span> FilterRegistrationBean(<span class="keyword">new</span> RequestCachingServletFilter());

        <span class="predefined-type">String</span> urlMapping = getUrlMapping();
        <span class="keyword">if</span> (urlMapping.endsWith(<span class="string"><span class="delimiter">&quot;</span><span class="content">**</span><span class="delimiter">&quot;</span></span>)) {
            urlMapping = urlMapping.substring(<span class="integer">0</span>, urlMapping.length() - <span class="integer">1</span>);
        }
        filterRegistrationBean.setUrlPatterns(<span class="predefined-type">Collections</span>.singleton(urlMapping));
        <span class="keyword">return</span> filterRegistrationBean;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> HandlerMapping handlerMapping(ApplicationContext applicationContext) {
        SimpleUrlHandlerMapping handlerMapping = <span class="keyword">new</span> SimpleUrlHandlerMapping();
        handlerMapping.setOrder(Ordered.HIGHEST_PRECEDENCE);
        handlerMapping.setAlwaysUseFullPath(<span class="predefined-constant">true</span>);

        <span class="predefined-type">Map</span>&lt;<span class="predefined-type">String</span>, <span class="predefined-type">Object</span>&gt; mappings = <span class="keyword">new</span> <span class="predefined-type">HashMap</span>&lt;&gt;();
        mappings.put(getUrlMapping(), getRestController(applicationContext));

        handlerMapping.setUrlMap(mappings);
        handlerMapping.setInterceptors(interceptors());

        <span class="keyword">return</span> handlerMapping;
    }

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This approach allows you to override auto-configuration features like <code>requestCachingFilter</code> or <code>handlerMapping</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="rest-request-mapping"><a class="anchor" href="#rest-request-mapping"></a><a class="link" href="#rest-request-mapping">3.3. Request Mapping</a></h3>
<div class="paragraph">
<p>By default, the simulator maps incoming requests to scenarios using mapping keys evaluated from the requests.
When utilizing REST support, <code>@RequestMapping</code> annotations on scenarios can also be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestMapping</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">/services/rest/simulator/hello</span><span class="delimiter">&quot;</span></span>, method = RequestMethod.POST, params = {<span class="string"><span class="delimiter">&quot;</span><span class="content">user</span><span class="delimiter">&quot;</span></span>})
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloScenario</span> <span class="directive">extends</span> AbstractSimulatorScenario {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.<span class="error">$</span>(scenario.http()
                .receive()
                .post()
                .message()
                .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;Hello xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">Say Hello!</span><span class="delimiter">&quot;</span></span> +
                     <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/Hello&gt;</span><span class="delimiter">&quot;</span></span>));

        scenario.<span class="error">$</span>(scenario.http()
                .send()
                .response(HttpStatus.OK)
                .message()
                .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;HelloResponse xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi there!</span><span class="delimiter">&quot;</span></span> +
                     <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/HelloResponse&gt;</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, any POST request to <code>/services/rest/simulator/hello</code> with the <code>user</code> query parameter will be mapped to the <code>HelloScenario</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="rest-status-code"><a class="anchor" href="#rest-status-code"></a><a class="link" href="#rest-status-code">3.4. HTTP Responses</a></h3>
<div class="paragraph">
<p>HTTP responses in REST APIs should include appropriate status codes.
This can be easily specified using Citrus&#8217;s Java DSL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@RequestMapping</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">/services/rest/simulator/hello</span><span class="delimiter">&quot;</span></span>, method = RequestMethod.POST)
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloScenario</span> <span class="directive">extends</span> AbstractSimulatorScenario {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.<span class="error">$</span>(scenario.http()
                .receive()
                .post()
                .message()
                .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;Hello xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">Say Hello!</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/Hello&gt;</span><span class="delimiter">&quot;</span></span>));

        scenario.<span class="error">$</span>(scenario.http()
                .send()
                .response(HttpStatus.OK)
                .message()
                .payload(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;HelloResponse xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi there!</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/HelloResponse&gt;</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Citrus&#8217;s HTTP Java DSL simplifies setting request methods, query parameters, and status codes.
Refer to the Citrus documentation for more details on using this API.</p>
</div>
</div>
<div class="sect2">
<h3 id="rest-swagger"><a class="anchor" href="#rest-swagger"></a><a class="link" href="#rest-swagger">3.5. Swagger Support</a></h3>
<div class="paragraph">
<p>The simulator is equipped to interpret Swagger (OpenAPI V3.0) specifications, using them to automatically generate scenarios for each defined operation.
This feature streamlines the process of creating a simulator that mirrors real-world API behavior based on the Swagger documentation.</p>
</div>
<div class="paragraph">
<p>To utilize this feature, the Swagger API file should be configured within the simulator&#8217;s settings.
Below is an example of how to set up Swagger support:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> <span class="directive">extends</span> SimulatorRestAdapter {

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ScenarioMapper scenarioMapper() {
        <span class="keyword">return</span> <span class="keyword">new</span> HttpRequestPathScenarioMapper();
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; urlMappings(SimulatorRestConfigurationProperties simulatorRestConfiguration) {
        <span class="keyword">return</span> singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">/petstore/v2/**</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> EndpointAdapter fallbackEndpointAdapter() {
        <span class="keyword">return</span> <span class="keyword">new</span> StaticEndpointAdapter() {
            <span class="annotation">@Override</span>
            <span class="directive">protected</span> Message handleMessageInternal(Message message) {
                <span class="keyword">return</span> <span class="keyword">new</span> HttpMessage().status(HttpStatus.NOT_FOUND);
            }
        };
    }

    <span class="annotation">@Bean</span>
    <span class="directive">public</span> <span class="directive">static</span> HttpScenarioGenerator scenarioGenerator() {
        HttpScenarioGenerator generator = <span class="keyword">new</span> HttpScenarioGenerator(<span class="keyword">new</span> ClassPathResource(<span class="string"><span class="delimiter">&quot;</span><span class="content">swagger/petstore-api.json</span><span class="delimiter">&quot;</span></span>));
        generator.setContextPath(<span class="string"><span class="delimiter">&quot;</span><span class="content">/petstore</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">return</span> generator;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above configuration, the <code>HttpScenarioGenerator</code> bean is defined with the location of the Swagger API file (<code>swagger/petstore-api.json</code>) and the context path for the API.
The <code>HttpRequestPathScenarioMapper</code> is set to handle the REST scenarios generated from the Swagger specification.</p>
</div>
<div class="paragraph">
<p>Additionally, a custom fallback endpoint adapter is defined for handling unmatched requests or validation errors.</p>
</div>
<div class="paragraph">
<p>Upon startup, the simulator dynamically generates scenarios for each operation in the Swagger API file.
These scenarios are available for review in the simulator&#8217;s user interface.</p>
</div>
<div class="paragraph">
<p>Consider the following sample operation from the Swagger API file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json"><span class="key"><span class="delimiter">&quot;</span><span class="content">/pet/findByStatus</span><span class="delimiter">&quot;</span></span>: {
  <span class="key"><span class="delimiter">&quot;</span><span class="content">get</span><span class="delimiter">&quot;</span></span>: {
    <span class="key"><span class="delimiter">&quot;</span><span class="content">tags</span><span class="delimiter">&quot;</span></span>: [
      <span class="string"><span class="delimiter">&quot;</span><span class="content">pet</span><span class="delimiter">&quot;</span></span>
    ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">summary</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Finds Pets by status</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Multiple status values can be provided with comma separated strings</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">operationId</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">findPetsByStatus</span><span class="delimiter">&quot;</span></span>,
    <span class="key"><span class="delimiter">&quot;</span><span class="content">produces</span><span class="delimiter">&quot;</span></span>: [
      <span class="string"><span class="delimiter">&quot;</span><span class="content">application/xml</span><span class="delimiter">&quot;</span></span>,
      <span class="string"><span class="delimiter">&quot;</span><span class="content">application/json</span><span class="delimiter">&quot;</span></span>
    ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">parameters</span><span class="delimiter">&quot;</span></span>: [
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">status</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">in</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">query</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Status values that need to be considered for filter</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">required</span><span class="delimiter">&quot;</span></span>: <span class="value">true</span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">array</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">string</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">enum</span><span class="delimiter">&quot;</span></span>: [
            <span class="string"><span class="delimiter">&quot;</span><span class="content">available</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">pending</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">sold</span><span class="delimiter">&quot;</span></span>
          ],
          <span class="key"><span class="delimiter">&quot;</span><span class="content">default</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">available</span><span class="delimiter">&quot;</span></span>
        },
        <span class="key"><span class="delimiter">&quot;</span><span class="content">collectionFormat</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">multi</span><span class="delimiter">&quot;</span></span>
      }
    ],
    <span class="key"><span class="delimiter">&quot;</span><span class="content">responses</span><span class="delimiter">&quot;</span></span>: {
      <span class="key"><span class="delimiter">&quot;</span><span class="content">200</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">successful operation</span><span class="delimiter">&quot;</span></span>,
        <span class="key"><span class="delimiter">&quot;</span><span class="content">schema</span><span class="delimiter">&quot;</span></span>: {
          <span class="key"><span class="delimiter">&quot;</span><span class="content">type</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">array</span><span class="delimiter">&quot;</span></span>,
          <span class="key"><span class="delimiter">&quot;</span><span class="content">items</span><span class="delimiter">&quot;</span></span>: {
            <span class="key"><span class="delimiter">&quot;</span><span class="content">$ref</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">#/definitions/Pet</span><span class="delimiter">&quot;</span></span>
          }
        }
      },
      <span class="key"><span class="delimiter">&quot;</span><span class="content">400</span><span class="delimiter">&quot;</span></span>: {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">description</span><span class="delimiter">&quot;</span></span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Invalid status value</span><span class="delimiter">&quot;</span></span>
      }
    },
    <span class="key"><span class="delimiter">&quot;</span><span class="content">security</span><span class="delimiter">&quot;</span></span>: [
      {
        <span class="key"><span class="delimiter">&quot;</span><span class="content">petstore_auth</span><span class="delimiter">&quot;</span></span>: [
          <span class="string"><span class="delimiter">&quot;</span><span class="content">write:pets</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">read:pets</span><span class="delimiter">&quot;</span></span>
        ]
      }
    ]
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>This operation would prompt the simulator to generate scenarios that validate requests against the defined criteria and provide appropriate responses, including handling different HTTP methods and query parameters.</p>
</div>
<div class="paragraph">
<p><strong>Important</strong>: The current implementation primarily focuses on generating scenarios for successful cases, like <code>200 OK</code> responses.
Other variations, such as error responses, are not automatically generated but can be manually added.</p>
</div>
<div class="paragraph">
<div class="title">Request and Response Examples</div>
<p>The simulator&#8217;s response to requests is based on the generated scenarios.
For a valid request, it would provide a response as defined in the Swagger specification.
Conversely, for an invalid request (e.g., missing required parameters), the simulator would respond with an error, such as <code>404 NOT_FOUND</code>.</p>
</div>
<div class="paragraph">
<div class="title">Additional Configuration Options</div>
<p>Swagger support can also be configured using system properties or environment variables, providing an alternative to programmatically setting up the <code>HttpScenarioGenerator</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties"># Example system properties for enabling Swagger support
citrus.simulator.rest.swagger.enabled=true
citrus.simulator.rest.swagger.api=classpath:swagger/petstore-api.json
citrus.simulator.rest.swagger.contextPath=/petstore</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, the same can be achieved using environment variables.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">CITRUS_SIMULATOR_REST_SWAGGER_ENABLED=true
CITRUS_SIMULATOR_REST_SWAGGER_API=classpath:swagger/petstore-api.json
CITRUS_SIMULATOR_REST_SWAGGER_CONTEXT_PATH=/petstore</code></pre>
</div>
</div>
<div class="paragraph">
<div class="title">Data Dictionary Integration</div>
<p>To further enhance dynamic message handling, data dictionaries can be used.
These dictionaries allow for centralized manipulation of message content via JsonPath expressions, making the interaction with the simulator more dynamic and adaptable.</p>
</div>
<div class="paragraph">
<div class="title">Defining Data Dictionaries</div>
<p>Data dictionaries are defined in property files, with mappings that dictate how message content should be manipulated:</p>
</div>
<div class="listingblock">
<div class="title">inbound mappings</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties"># Example inbound data dictionary mappings
$.category.name=@assertThat(anyOf(is(dog),is(cat)))@
$.status=@matches(available|pending|sold|placed)@
$.quantity=@greaterThan(0)@</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">outbound mappings</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties"># Example outbound data dictionary mappings
$.category.name=citrus:randomEnumValue('dog', 'cat')
$.name=citrus:randomEnumValue('hasso', 'cutie', 'fluffy')</code></pre>
</div>
</div>
<div class="paragraph">
<p>These mappings apply to both incoming and outgoing messages, ensuring that the simulator&#8217;s responses are dynamic and contextually relevant, adhering to the constraints and possibilities defined in the Swagger specification.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="web-service"><a class="anchor" href="#web-service"></a><a class="link" href="#web-service">4. Web Service Support</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The simulator is capable of handling SOAP Web Service calls as a server.
To activate generic SOAP web service support, set the property <code>citrus.simulator.ws.enabled=true</code> in the <code>application.properties</code> file, or through a system property or environment variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Setting <code>citrus.simulator.ws.enabled</code> triggers auto-configuration steps and loads the required beans for the Spring application context.</p>
</div>
<div class="paragraph">
<p>SOAP web service support is not included by default, so you must add Citrus dependencies to your project.
In Maven, add the following dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- Citrus web service support --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>org.citrusframework<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>citrus-ws<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>${citrus.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With these configurations, the simulator is ready to handle incoming SOAP Web Service calls.
When SOAP web service handling is enabled, the simulator manages the SOAP envelope automatically, meaning you don&#8217;t have to deal with the SOAP envelope in scenario operations.
The scenario receive operation can access the SOAP action of the incoming request, and it is also possible to return a SOAP fault message as a scenario outcome.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s proceed to review the SOAP-related configuration options as described in the following sections.</p>
</div>
<div class="sect2">
<h3 id="web-service-config"><a class="anchor" href="#web-service-config"></a><a class="link" href="#web-service-config">4.1. Configuration</a></h3>
<div class="paragraph">
<p>Once SOAP support is enabled in the simulator, various configuration options become available.
The most straightforward method is to add a <code>SimulatorWebServiceAdapter</code> implementation to the classpath.
This adapter provides several configuration methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">SimulatorWebServiceAdapter</span> <span class="directive">implements</span> SimulatorWebServiceConfigurer {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; servletMappings() {
        <span class="keyword">return</span> singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">/services/ws/*</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ScenarioMapper scenarioMapper() {
        <span class="keyword">return</span> <span class="keyword">new</span> ContentBasedXPathScenarioMapper().addXPathExpression(<span class="string"><span class="delimiter">&quot;</span><span class="content">local-name(/*)</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> EndpointInterceptor<span class="type">[]</span> interceptors() {
        <span class="keyword">return</span> <span class="keyword">new</span> EndpointInterceptor<span class="type">[]</span> { <span class="keyword">new</span> LoggingEndpointInterceptor() };
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This adapter defines methods to configure the simulator&#8217;s SOAP message handling, such as adding different scenario mapper implementations or endpoint interceptors.
The <code>servletMappings</code> method defines client access to the simulator&#8217;s SOAP service.
For example, if the Spring Boot application runs on port 8080, the SOAP service would be accessible at:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>http://localhost:8080/services/ws/*</code></pre>
</div>
</div>
<div class="paragraph">
<p>Clients can send SOAP calls to this endpoint, and the simulator will respond with appropriate SOAP responses based on the executed scenario.
You can customize the simulator&#8217;s SOAP support by extending <code>SimulatorWebServiceAdapter</code> in a custom class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Component</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MySimulatorWebServiceAdapter</span> <span class="directive">extends</span> SimulatorWebServiceAdapter {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; servletMappings() {
        <span class="keyword">return</span> singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">/my-soap-service/*</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The class is annotated with <code>@Component</code> so that Spring recognizes it and overrides the default SOAP adapter behavior.
By customizing the <code>servletMappings</code> method, the SOAP simulator API will be accessible under a new endpoint URI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>http://localhost:8080/my-soap-service/*</code></pre>
</div>
</div>
<div class="paragraph">
<p>For direct integration with the Spring Boot main application class, extend <code>SimulatorWebServiceAdapter</code> as shown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.citrusframework.simulator.ws.SimulatorWebServiceAdapter</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> <span class="directive">extends</span> SimulatorWebServiceAdapter {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; servletMappings() {
        <span class="keyword">return</span> singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">/my-soap-service/*</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ScenarioMapper scenarioMapper() {
        <span class="keyword">return</span> <span class="keyword">new</span> SoapActionScenarioMapper();
    }

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="web-service-customization"><a class="anchor" href="#web-service-customization"></a><a class="link" href="#web-service-customization">4.2. Advanced Customizations</a></h3>
<div class="paragraph">
<p>For more advanced configurations, extend <code>SimulatorWebServiceSupport</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.citrusframework.simulator.ws.SimulatorWebServiceAutoConfiguration</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> <span class="directive">extends</span> SimulatorWebServiceAutoConfiguration {

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="predefined-type">String</span> getServletMapping() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">/my-soap-service/**</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Bean</span>
    <span class="directive">public</span> ServletRegistrationBean messageDispatcherServlet(ApplicationContext applicationContext) {
        MessageDispatcherServlet servlet = <span class="keyword">new</span> MessageDispatcherServlet();
        servlet.setApplicationContext(applicationContext);
        servlet.setTransformWsdlLocations(<span class="predefined-constant">true</span>);
        <span class="keyword">return</span> <span class="keyword">new</span> ServletRegistrationBean(servlet, getDispatcherServletMapping());
    }

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration allows overriding features like the <code>messageDispatcherServlet</code> in the SOAP support auto-configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="web-service-response"><a class="anchor" href="#web-service-response"></a><a class="link" href="#web-service-response">4.3. SOAP Response</a></h3>
<div class="paragraph">
<p>When using SOAP services, you might want to respond synchronously with a SOAP message.
Since the simulator handles SOAP communication automatically, you can define the response message directly in the scenario.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloScenario</span> <span class="directive">extends</span> AbstractSimulatorScenario {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.<span class="error">$</span>(scenario.soap()
            .receive()
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;Hello xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Say Hello!</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/Hello&gt;</span><span class="delimiter">&quot;</span></span>)
            .soapAction(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>));

        scenario.<span class="error">$</span>(scenario.soap()
            .send()
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;HelloResponse xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi there!</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/HelloResponse&gt;</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Citrus Java DSL provides SOAP-specific methods for specifying request and response data.
The SOAP envelope is handled automatically, so there&#8217;s no need to include it here.
The receive operation verifies the SOAP action header value, and you can specify the synchronous SOAP response message.</p>
</div>
<div class="paragraph">
<p>Next, we will discuss how to send SOAP faults as response messages.</p>
</div>
</div>
<div class="sect2">
<h3 id="web-service-faults"><a class="anchor" href="#web-service-faults"></a><a class="link" href="#web-service-faults">4.4. SOAP Faults</a></h3>
<div class="paragraph">
<p>When using SOAP, you may need to send back a SOAP fault message.
The default Web Service scenario implementation allows sending fault responses.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">GoodNight</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">GoodNightScenario</span> <span class="directive">extends</span> AbstractSimulatorScenario {

    <span class="annotation">@Override</span>
    <span class="directive">protected</span> <span class="type">void</span> configure() {
        scenario.<span class="error">$</span>(scenario.soap()
            .receive()
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;GoodNight xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Go to sleep!</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/GoodNight&gt;</span><span class="delimiter">&quot;</span></span>)
            .soapAction(<span class="string"><span class="delimiter">&quot;</span><span class="content">GoodNight</span><span class="delimiter">&quot;</span></span>));

        scenario.<span class="error">$</span>(scenario.soap()
            .sendFault()
            .message()
            .faultCode(<span class="string"><span class="delimiter">&quot;</span><span class="content">{http://citrusframework.org}CITRUS:SIM-1001</span><span class="delimiter">&quot;</span></span>)
            .faultString(<span class="string"><span class="delimiter">&quot;</span><span class="content">No sleep for me!</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the <code>sendFault()</code> method is used to create a SOAP fault message.
The simulator adds the SOAP envelope and fault details, allowing you to choose between a success response or a SOAP fault.</p>
</div>
</div>
<div class="sect2">
<h3 id="web-service-wsdl"><a class="anchor" href="#web-service-wsdl"></a><a class="link" href="#web-service-wsdl">4.5. WSDL Support</a></h3>
<div class="paragraph">
<p>The simulator can read WSDL specifications to auto-generate scenarios for each defined operation.
These operations include request and response message data, which the simulator uses to generate basic scenarios.</p>
</div>
<div class="paragraph">
<p>To set up WSDL support, see the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> <span class="directive">extends</span> SimulatorWebServiceAdapter {

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;<span class="predefined-type">String</span>&gt; servletMappings(SimulatorWebServiceConfigurationProperties simulatorWebServiceConfiguration) {
        <span class="keyword">return</span> singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">/services/ws/HelloService/v1/*</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> EndpointAdapter fallbackEndpointAdapter() {
        <span class="comment">// Implementation details...</span>
    }

    <span class="annotation">@Bean</span>
    <span class="directive">public</span> <span class="directive">static</span> WsdlScenarioGenerator scenarioGenerator() {
        WsdlScenarioGenerator generator = <span class="keyword">new</span> WsdlScenarioGenerator(<span class="keyword">new</span> ClassPathResource(<span class="string"><span class="delimiter">&quot;</span><span class="content">xsd/Hello.wsdl</span><span class="delimiter">&quot;</span></span>));
        <span class="keyword">return</span> generator;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the configuration above, a <code>WsdlScenarioGenerator</code> bean is set up with the WSDL file location <code>xsd/Hello.wsdl</code>.
A custom fallback endpoint adapter is also defined for handling unmatched requests or validation errors.</p>
</div>
<div class="paragraph">
<p>Upon startup, the generator creates scenarios for each operation in the WSDL file.</p>
</div>
<div class="paragraph">
<p>Consider the following WSDL file sample:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- Example WSDL content --&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This WSDL defines operations like <strong>hello</strong>, with request and response message structures.</p>
</div>
<div class="paragraph">
<p>Generated scenarios validate requests against the XSD schema in the WSDL and generate appropriate responses.
Dynamic values in responses adhere to the schema rules.</p>
</div>
<div class="paragraph">
<p>Communication in generated scenarios follows this pattern:</p>
</div>
<div class="listingblock">
<div class="title">Request</div>
<div class="content">
<pre class="CodeRay highlight"><code>&lt;!-- Example SOAP request --&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Response</div>
<div class="content">
<pre class="CodeRay highlight"><code>&lt;!-- Example SOAP response --&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>For invalid requests, such as those with incorrect SOAP actions, the simulator responds with a default SOAP fault, as defined in the fallback endpoint adapter.</p>
</div>
<div class="sect3">
<h4 id="web-service-wsdl-properties"><a class="anchor" href="#web-service-wsdl-properties"></a><a class="link" href="#web-service-wsdl-properties">4.5.1. WSDL System Properties</a></h4>
<div class="paragraph">
<p>The WSDL auto-generation feature can be activated using system properties in the Spring Boot application, providing an alternative to programmatically setting up the <code>WsdlScenarioGenerator</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties"># System properties for enabling WSDL support
citrus.simulator.ws.wsdl.enabled=true
citrus.simulator.ws.wsdl.location=classpath:xsd/Hello.wsdl</code></pre>
</div>
</div>
<div class="paragraph">
<p>Environment variables can also be used for configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties"># Environment variables for enabling WSDL support
CITRUS_SIMULATOR_WS_WSDL_ENABLED=true
CITRUS_SIMULATOR_WS_WSDL_LOCATION=classpath:xsd/Hello.wsdl</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="data-dictionaries"><a class="anchor" href="#data-dictionaries"></a><a class="link" href="#data-dictionaries">Data dictionaries</a></h4>
<div class="paragraph">
<p>Auto-generated WSDL scenarios utilize data dictionaries to create dynamic values in both request and response messages.
Data dictionaries are a well-known Citrus functionality that centralizes data manipulation, often using XPath expressions.
In XML message processing, each construction step consults the data dictionary for potential modifications to elements and attributes.</p>
</div>
<div class="paragraph">
<p>Auto-generated scenarios reference both inbound and outbound data dictionaries.
To enable these dictionaries, activate them in the Spring Boot <code>application.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">citrus.simulator.inbound.xml.dictionary.enabled=true
citrus.simulator.outbound.xml.dictionary.enabled=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Activating these settings automatically enables data dictionaries, generating random numbers and strings in all auto-generated WSDL messages.
For incoming requests, the dictionary ensures elements and attributes are ignored by default during validation.
This approach is beneficial, as it&#8217;s impossible to predict all data sent to the simulator.</p>
</div>
<div class="paragraph">
<p>You can define specific mappings in the dictionaries using XPath expressions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="properties">citrus.simulator.inbound.xml.dictionary.enabled=true
citrus.simulator.inbound.xml.dictionary.location=classpath:dictionary/inbound_mappings.xml
citrus.simulator.outbound.xml.dictionary.enabled=true
citrus.simulator.outbound.xml.dictionary.location=classpath:dictionary/outbound_mappings.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inbound and outbound mapping files are specified for the dictionaries.
For example, an inbound mapping file could look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;</span>
<span class="tag">&lt;properties&gt;</span>
  <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">//sim:Hello</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Say Hello!<span class="tag">&lt;/entry&gt;</span>
  <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">//sim:GoodBye</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Say GoodBye!<span class="tag">&lt;/entry&gt;</span>
<span class="tag">&lt;/properties&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The inbound mappings define XPath expressions to set pre-defined values for incoming requests.
For instance, the above mappings set specific string values for <code>&lt;Hello&gt;</code> and <code>&lt;GoodBye&gt;</code> elements.
When using XPath in XML, proper namespace handling is crucial.
In the provided XPath expressions, the <code>sim:</code> prefix corresponds to a namespace in the WSDL schema for <code>Hello</code> messages.</p>
</div>
<div class="paragraph">
<p>You can define a global namespace context in your Spring application to facilitate namespace handling:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> NamespaceContextBuilder namespaceContextBuilder() {
    NamespaceContextBuilder namespaceContextBuilder = <span class="keyword">new</span> NamespaceContextBuilder();
    namespaceContextBuilder.getNamespaceMappings().put(<span class="string"><span class="delimiter">&quot;</span><span class="content">sim</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> namespaceContextBuilder;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After setting up this namespace context, the <code>sim</code> prefix can be globally used in XPath expressions.</p>
</div>
<div class="paragraph">
<p>Outbound mappings can also be specified to create specific response values.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;</span>
<span class="tag">&lt;properties&gt;</span>
  <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">//sim:HelloResponse</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>Hello!<span class="tag">&lt;/entry&gt;</span>
  <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">//sim:GoodByeResponse</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>GoodBye!<span class="tag">&lt;/entry&gt;</span>
<span class="tag">&lt;/properties&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>For instance, the above outbound mappings ensure that <code>HelloResponse</code> messages always contain "Hello!".
Citrus functions can be used to define more complex values in auto-generated messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="doctype">&lt;!DOCTYPE properties SYSTEM &quot;http://java.sun.com/dtd/properties.dtd&quot;&gt;</span>
<span class="tag">&lt;properties&gt;</span>
  <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">//sim:HelloResponse</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>citrus:randomString(10)<span class="tag">&lt;/entry&gt;</span>
  <span class="tag">&lt;entry</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">//sim:GoodByeResponse</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>citrus:randomEnumValue('GoodBye!', 'SeeYaLater!', 'ByeBye!')<span class="tag">&lt;/entry&gt;</span>
<span class="tag">&lt;/properties&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms"><a class="anchor" href="#jms"></a><a class="link" href="#jms">5. JMS support</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The simulator is able to receive messages from message brokers using the <strong>Java Message Service</strong> API (JMS). As a consumer the simulator constantly polls JMS destinations (queue or topic)
for incoming request messages. When the queue is of synchronous nature the simulator is able to send synchronous response messages.</p>
</div>
<div class="paragraph">
<p>The generic jms support is activated by setting the property <strong>citrus.simulator.jms.enabled=true</strong>. You can do so in the basic <code>application.properties</code>
file or via system property or environment variable setting.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>citrus.simulator.jms.enabled</strong> property performs some auto configuration steps and loads required beans for the Spring application context
in the Spring boot application.</p>
</div>
<div class="paragraph">
<p>As JMS support is not included by default in the simulator we need to add some Citrus dependencies to our project. In Maven we simply add the following dependency to the project POM.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- Citrus web service support --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>org.citrusframework<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>citrus-jms<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>${citrus.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>We may also want to add JMS provider-specific connection factory implementations, depending on which JMS message broker you use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- ActiveMQ Artemis message broker support --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>org.springframework.boot<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>spring-boot-starter-artemis<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>${spring.boot.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With that piece of configuration we are ready to handle incoming JMS messages on the simulator. Of course we need a JMS connection factory and other JMS related
configuration options as described in the following sections.</p>
</div>
<div class="sect2">
<h3 id="jms-config"><a class="anchor" href="#jms-config"></a><a class="link" href="#jms-config">5.1. Configuration</a></h3>
<div class="paragraph">
<p>Once the JMS support is enabled on the simulator we have different configuration options. The most comfortable way is to
add a <strong>SimulatorJmsAdapter</strong> implementation to the project. The adapter provides several configuration methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">SimulatorJmsAdapter</span> <span class="directive">implements</span> SimulatorJmsConfigurer {
    <span class="annotation">@Override</span>
    <span class="directive">public</span> ConnectionFactory connectionFactory() {
        <span class="keyword">return</span> <span class="keyword">new</span> SingleConnectionFactory();
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> destinationName() {
        <span class="keyword">return</span> <span class="predefined-type">System</span>.getProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">citrus.simulator.jms.destination</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Citrus.Simulator.Inbound</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> useSoapEnvelope() {
        <span class="keyword">return</span> <span class="predefined-constant">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ScenarioMapper scenarioMapper() {
        <span class="keyword">return</span> <span class="keyword">new</span> ContentBasedXPathScenarioMapper().addXPathExpression(<span class="string"><span class="delimiter">&quot;</span><span class="content">local-name(/*)</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The adapter defines methods that configure the simulator JMS handling. For instance we can add another scenario mapper implementation or
enable automatic SOAP envelope handling.</p>
</div>
<div class="paragraph">
<p>The <strong>destinationName</strong> defines the incoming JMS destination to poll as a consumer. The <strong>connectionFactory</strong> is mandatory in order to connect to a JMS
message broker.</p>
</div>
<div class="paragraph">
<p>You can simply extend the adapter in a custom class for adding customizations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Component</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">MySimulatorJmsAdapter</span> <span class="directive">extends</span> SimulatorJmsAdapter {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> destinationName() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">JMS.Queue.simulator.inbound</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ConnectionFactory connectionFactory() {
        <span class="keyword">return</span> <span class="keyword">new</span> ActiveMQConnectionFactory(<span class="string"><span class="delimiter">&quot;</span><span class="content">tcp://localhost:61616</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see the class is annotated with <strong>@Component</strong> annotation. This is because the adapter should be recognized by Spring in order to overwrite the default
JMS adapter behavior. The custom adapter just overwrites the <strong>connectionFactory</strong> and <strong>destinationName</strong> methods so the JMS simulator will connect to the ActiveMQ message broker
and listen for incoming requests on that queue <strong>JMS.Queue.simulator.inbound</strong>.</p>
</div>
<div class="paragraph">
<p>This is the simplest way to customize the simulator JMS support. We can also use the adapter extension directly on the Spring boot main application class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.citrusframework.simulator.jms.SimulatorJmsAdapter</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> <span class="directive">extends</span> SimulatorJmsAdapter {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> destinationName() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">JMS.Queue.simulator.inbound</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ConnectionFactory connectionFactory() {
        <span class="keyword">return</span> <span class="keyword">new</span> ActiveMQConnectionFactory(<span class="string"><span class="delimiter">&quot;</span><span class="content">tcp://localhost:61616</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once this is done the simulator polls the target destination for new incoming request messages. As usual the simulator maps incoming requests to simulator scenarios for execution. Inside
the scenario you can receive the JMS request messages as usual using the scenario endpoint. The scenario logic is then able to provide a response message that is sent back to the synchronous reply
destination if any is specified.</p>
</div>
</div>
<div class="sect2">
<h3 id="jms-async"><a class="anchor" href="#jms-async"></a><a class="link" href="#jms-async">5.2. Asynchronous communication</a></h3>
<div class="paragraph">
<p>For asynchronous communication we can define normal JMS destination endpoints in Citrus in order to autowire those in the scenario.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> destinationName() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">JMS.Queue.simulator.inbound</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ConnectionFactory connectionFactory() {
        <span class="keyword">return</span> <span class="keyword">new</span> ActiveMQConnectionFactory(<span class="string"><span class="delimiter">&quot;</span><span class="content">tcp://localhost:61616</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Bean</span>
    <span class="directive">public</span> JmsEndpoint replyEndpoint() {
        <span class="keyword">return</span> CitrusEndpoints.jms()
                              .asynchronous()
                              .destinationName(<span class="string"><span class="delimiter">&quot;</span><span class="content">JMS.Queue.simulator.reply</span><span class="delimiter">&quot;</span></span>)
                              .connectionFactory(connectionFactory())
                              .build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see we are able to create several JMS endpoints in Citrus. We can autowire those endpoints in a scenario for sending back an asynchronous response.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloJmsScenario</span> <span class="directive">extends</span> AbstractSimulatorScenario {

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> JmsEndpoint replyEndpoint;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.<span class="error">$</span>(scenario.receive()
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;Hello xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Say Hello!</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/Hello&gt;</span><span class="delimiter">&quot;</span></span>));

        scenario.<span class="error">$</span>(scenario.send()
            .message()
            .body(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;HelloResponse xmlns=</span><span class="char">\&quot;</span><span class="content">http://citrusframework.org/schemas/hello</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">Hi there!</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/HelloResponse&gt;</span><span class="delimiter">&quot;</span></span>));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this sample above we receive the scenario request message as usual using the scenario endpoint. After that we send back a response on the replyEndpoint which has been
injected to the scenario using the <code>@Autowired</code> annotation.</p>
</div>
<div class="paragraph">
<p>In general scenarios can interact with all Citrus endpoints that get defined as Spring beans in the application context configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="jms-sync"><a class="anchor" href="#jms-sync"></a><a class="link" href="#jms-sync">5.3. Synchronous communication</a></h3>
<div class="paragraph">
<p>When dealing with synchronous communication the message producer waits for a reply message on a reply destination. This reply destination handling is automatically done
within the simulator. So when we have synchronous communication we simply send back a response message using the scenario endpoint. The simulator makes sure that the response is
provided to the waiting producer on the reply destination.</p>
</div>
<div class="paragraph">
<p>The synchronous JMS communication needs to be enabled on the JMS simulator adapter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.citrusframework.simulator.jms.SimulatorJmsAdapter</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> <span class="directive">extends</span> SimulatorJmsAdapter {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">String</span> destinationName() {
        <span class="keyword">return</span> <span class="string"><span class="delimiter">&quot;</span><span class="content">JMS.Queue.simulator.inbound</span><span class="delimiter">&quot;</span></span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ConnectionFactory connectionFactory() {
        <span class="keyword">return</span> <span class="keyword">new</span> ActiveMQConnectionFactory(<span class="string"><span class="delimiter">&quot;</span><span class="content">tcp://localhost:61616</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> synchronous(SimulatorJmsConfigurationProperties simulatorJmsConfiguration) {
        <span class="keyword">return</span> <span class="predefined-constant">true</span>;
    }

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This completes the JMS communication support within the simulator. Read more about other messaging transports such as Http REST or SOAP in this documentation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="endpoint"><a class="anchor" href="#endpoint"></a><a class="link" href="#endpoint">6. Endpoint support</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>We have seen how the simulator handles different transports such as <a href="#rest">Http REST</a>, <a href="#web-service">SOAP web services</a> and <a href="#jms">JMS</a>.
Now the simulator is also able to handle other message transports such as mail communication, JMX mbean server, RMI invocations and much more. The
simulator is able to deal with any kind of endpoint component that is supported in Citrus framework.</p>
</div>
<div class="paragraph">
<p>The generic endpoint support is activated by setting the property <strong>citrus.simulator.endpoint.enabled=true</strong>. You can do so in the basic <code>application.properties</code>
file or via system property or environment variable setting.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> {
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>citrus.simulator.endpoint.enabled</strong> property performs some auto configuration steps and loads required beans for the Spring application context
in the Spring boot application. Once we use that feature we can have any Citrus endpoint component as inbound source for simulator scenarios. This means
we can have a mail server or a RMI server that is simulated with proper response messages.</p>
</div>
<div class="sect2">
<h3 id="endpoint-config"><a class="anchor" href="#endpoint-config"></a><a class="link" href="#endpoint-config">6.1. Configuration</a></h3>
<div class="paragraph">
<p>As we are using generic Citrus endpoint components as inbound source we need to configure those endpoint components. The most comfortable way is to
add a <strong>SimulatorEndpointComponentAdapter</strong> implementation to the classpath. The adapter provides several configuration methods.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="directive">abstract</span> <span class="type">class</span> <span class="class">SimulatorEndpointComponentAdapter</span> <span class="directive">implements</span> SimulatorEndpointComponentConfigurer {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="directive">abstract</span> Endpoint endpoint(ApplicationContext applicationContext);

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">boolean</span> useSoapEnvelope() {
        <span class="keyword">return</span> <span class="predefined-constant">false</span>;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ScenarioMapper scenarioMapper() {
        <span class="keyword">return</span> <span class="keyword">new</span> ContentBasedXPathScenarioMapper().addXPathExpression(<span class="string"><span class="delimiter">&quot;</span><span class="content">local-name(/*)</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The adapter defines methods that configure the endpoint component used as inbound source. As usual we can set the scenario mapper implementation or
add automatic SOAP envelope support.</p>
</div>
<div class="paragraph">
<p>More importantly we need to define an inbound endpoint that is used as source for scenarios. Let&#8217;s have a simple endpoint component adapter example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">org.citrusframework.simulator.endpoint.SimulatorEndpointComponentAdapter</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.SpringApplication</span>;
<span class="keyword">import</span> <span class="include">org.springframework.boot.autoconfigure.SpringBootApplication</span>;

<span class="annotation">@SpringBootApplication</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">Simulator</span> <span class="directive">extends</span> SimulatorEndpointComponentAdapter {

    <span class="directive">public</span> <span class="directive">static</span> <span class="type">void</span> main(<span class="predefined-type">String</span><span class="type">[]</span> args) {
        SpringApplication.run(Simulator.class, args);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> Endpoint endpoint(ApplicationContext applicationContext) {
        MailServer mailServer = <span class="keyword">new</span> MailServer();
        mailServer.setPort(<span class="integer">2222</span>);
        mailServer.setAutoStart(<span class="predefined-constant">true</span>);

        <span class="keyword">return</span> mailServer;
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> ScenarioMapper scenarioMapper() {
        <span class="keyword">return</span> <span class="keyword">new</span> ContentBasedXPathScenarioMapper()
                        .addNamespaceMapping(<span class="string"><span class="delimiter">&quot;</span><span class="content">mail</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.citrusframework.org/schema/mail/message</span><span class="delimiter">&quot;</span></span>)
                        .addXPathExpression(<span class="string"><span class="delimiter">&quot;</span><span class="content">/mail:mail-message/mail:subject</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The custom adapter defines a Citrus mail server endpoint that should be used as inbound source. Any mail message that arrives at this mail server component will
trigger a new simulator scenario then. Also we overwrite the scenario mapper implementation. The sample uses a content based XPath mapper that uses the mail subject
value as scenario mapping key.</p>
</div>
<div class="paragraph">
<p>As mail server endpoint support is not included by default in the simulator we need to add some Citrus dependencies to our project. In Maven we simply add the following dependency to the project POM.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- Citrus web service support --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>org.citrusframework<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>citrus-mail<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>${citrus.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration would lead us to a mail server that responds to incoming mail messages base on the mail subject. So we can have several simulator
scenarios for different mail messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Scenario</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloScenario</span> <span class="directive">extends</span> AbstractSimulatorScenario {

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario
            .receive()
            .payload(<span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;mail-message xmlns=</span><span class="char">\&quot;</span><span class="content">http://www.citrusframework.org/schema/mail/message</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;from&gt;user@citrusframework.org&lt;/from&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;to&gt;citrus@citrusframework.org&lt;/to&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;cc&gt;&lt;/cc&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;bcc&gt;&lt;/bcc&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;subject&gt;Hello&lt;/subject&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;body&gt;</span><span class="delimiter">&quot;</span></span> +
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;contentType&gt;text/plain; charset=utf-8&lt;/contentType&gt;</span><span class="delimiter">&quot;</span></span> +
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;content&gt;Say Hello!&lt;/content&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/body&gt;</span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/mail-message&gt;</span><span class="delimiter">&quot;</span></span>);

        scenario
            .send()
            .payload(
                <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;mail-response xmlns=</span><span class="char">\&quot;</span><span class="content">http://www.citrusframework.org/schema/mail/message</span><span class="char">\&quot;</span><span class="content">&gt;</span><span class="delimiter">&quot;</span></span> +
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;code&gt;250&lt;/code&gt;</span><span class="delimiter">&quot;</span></span> +
                        <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;message&gt;OK&lt;/message&gt;</span><span class="delimiter">&quot;</span></span> +
                    <span class="string"><span class="delimiter">&quot;</span><span class="content">&lt;/mail-response&gt;</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The scenario implementation above is listening for mail messages of subject <strong>Hello</strong>. The
mail XML marshalling is automatically done by Citrus. This is the usual way how the Citrus mail component handles mail messages and responses. That means we can use the default Citrus
features in our simulator, too. The scenario sends back a positive mail response to the calling client.</p>
</div>
<div class="paragraph">
<p>This is how we can use any Citrus endpoint component as simulator inbound source. This gives us the opportunity to support a huge set of message transports and
message types in our simulator applications. Each incoming request on the endpoint component triggers a new simulator scenario.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="user-interface"><a class="anchor" href="#user-interface"></a><a class="link" href="#user-interface">7. User Interface</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The simulator application, initiated as a Spring Boot web application, offers an intuitive user interface to enhance user interaction and efficiency.
Upon launching the simulator and navigating to <a href="http://localhost:8080" class="bare">http://localhost:8080</a> in your browser, you are greeted with the default welcome page, designed for straightforward interaction and focused on displaying JSON response data from the simulator REST API.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/default-ui.png" alt="The default Simulator UI" title="Default UI of the Citrus Simulator"></span></p>
</div>
<div class="paragraph">
<p>For an enriched experience, the simulator supports a more advanced user interface built with Angular, providing comprehensive administrative capabilities.
This enhanced UI allows users to effortlessly monitor the simulator&#8217;s status and review detailed logs of executed scenarios and their outcomes.</p>
</div>
<div class="sect2">
<h3 id="user-interface-integration"><a class="anchor" href="#user-interface-integration"></a><a class="link" href="#user-interface-integration">7.1. Integrating the Angular-based UI</a></h3>
<div class="paragraph">
<p>To integrate the advanced Angular-based UI into your simulator project, add the following Maven dependency:</p>
</div>
<div class="listingblock">
<div class="title">Citrus Simulator UI Dependency</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="comment">&lt;!-- Simulator web ui --&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>org.citrusframework<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>citrus-simulator-ui<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>${citrus.simulator.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>${citrus.simulator.version}</code> with the appropriate version of the Citrus Simulator you are using.
This information can typically be found in the project documentation or the repository where the simulator is hosted.</p>
</div>
<div class="paragraph">
<p>Upon successful integration and starting the simulator, the Angular-based UI becomes accessible at <a href="http://localhost:8080" class="bare">http://localhost:8080</a>, automatically enhancing the default user interface without any additional configuration.
The simulator dashboard provides a comprehensive overview of your project, presenting key metrics and insights at a glance.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/dashboard.png" alt="Citrus Simulator Dashboard" title="Dashboard providing a quick overview of the simulator&#8217;s metrics and activity"></span></p>
</div>
<div class="paragraph">
<p>Using the "Reset"-button, it&#8217;s also possible to delete all recorded Test Results and Executions.</p>
</div>
</div>
<div class="sect2">
<h3 id="user-interface-scenarios"><a class="anchor" href="#user-interface-scenarios"></a><a class="link" href="#user-interface-scenarios">7.2. Scenarios</a></h3>
<div class="paragraph">
<p>The "Scenarios" tab within the user interface displays all scenarios available for automatic mapping upon handling incoming requests.
This tab not only lists the scenarios but also offers functionalities such as initiating scenario executions directly from the UI.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/scenario-list.png" alt="Scenario Executions" title="List of available scenarios in the simulator"></span></p>
</div>
<div class="paragraph">
<p>Selecting any scenario from the list opens a detailed view of that specific scenario.
This view includes comprehensive information about the scenario, such as the messages processed during executions and the results of each execution, providing valuable insights into the behavior and outcome of the scenario.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/scenario-details.png" alt="Scenario Details" title="Detailed view of a scenario, including execution details"></span></p>
</div>
<div class="paragraph">
<p>Each scenario detail page is designed to offer a deep dive into the scenario&#8217;s workings, including the input and output data, any validations or assertions applied, and a step-by-step breakdown of the scenario&#8217;s execution path.
This level of detail aids in understanding each scenario&#8217;s role within the simulator and troubleshooting any issues that may arise.</p>
</div>
</div>
<div class="sect2">
<h3 id="user-interface-scenario-results"><a class="anchor" href="#user-interface-scenario-results"></a><a class="link" href="#user-interface-scenario-results">7.3. Scenario Executions</a></h3>
<div class="paragraph">
<p>Every execution of a scenario within the simulator is meticulously recorded, with the results readily accessible through the user interface for review and analysis.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/scenario-executions.png" alt="Scenario Executions" title="Overview of scenario executions, showing a list with statuses and key details"></span></p>
</div>
<div class="paragraph">
<p>This view also provides rich filter possibilities, by name, status and so on. Even by headers of recorded messages.</p>
</div>
<div class="paragraph">
<div class="title">Message Header Filtering</div>
<p>Message header filtering uses a specific syntax.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If you don&#8217;t specify a key or comparator, the filter will search for messages where <strong>any</strong> header value <strong>contains</strong> the provided string. (e.g., <code>myValue</code>)</p>
</li>
<li>
<p>To filter based on a <strong>specific key</strong>, use <code>key=value</code>. (e.g., <code>source=myApp</code>)</p>
</li>
<li>
<p>You can also use the <strong>CONTAINS</strong> operator (<code>~</code>) to search within a key&#8217;s value. (e.g., <code>name~something-like-this</code>)</p>
</li>
<li>
<p>For numeric keys, you can use comparison operators like <code>&lt;, `&#8656;</code>, <code>&gt;</code>, <code>&gt;=</code>. (e.g., <code>priority&lt;3</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Combining multiple patterns: Separate multiple filter expressions with a semicolon (<code>;</code>). They will be combined using logical <code>AND</code> operators. (e.g., <code>source=myApp; status=active</code>)</p>
</div>
<div class="paragraph">
<p>There is a helping dialog available to the right of the message-header input field.</p>
</div>
<div class="sect3">
<h4 id="user-interface-execution-results"><a class="anchor" href="#user-interface-execution-results"></a><a class="link" href="#user-interface-execution-results">7.3.1. Viewing Execution Results</a></h4>
<div class="paragraph">
<p>The results of each scenario execution provide a comprehensive overview, including the outcome (such as Passed, Failed, or Errored), execution duration, and the parameters and data utilized during the execution.
You can even see full stacktraces to debug your scenario failures.
To access the detailed results of a specific execution, simply select the desired entry from the list.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/scenario-execution-details.png" alt="Scenario Execution Details" title="Detailed view of a scenario execution, including request/response data and any logged messages or errors"></span></p>
</div>
<div class="paragraph">
<p><strong>Detailed Execution Insights</strong></p>
</div>
<div class="paragraph">
<p>Upon opening an execution entry, you will be presented with a detailed account of the scenario&#8217;s activity, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Error Details: In cases of failure, detailed error information, including stack traces, is provided to aid in diagnosing and resolving issues.</p>
</li>
<li>
<p>Request and Response Messages: The exact data sent and received, allowing for a detailed inspection of the scenario&#8217;s external interactions.</p>
</li>
<li>
<p>Actions: All actions that were recorded during execution, provides additional information about the course of the scenario.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Navigation and Analysis</strong></p>
</div>
<div class="paragraph">
<p>The user interface is designed to facilitate easy navigation through the execution history.
Use available tools such as filters to narrow down the list by status, date range, or specific keywords.
Each execution entry is designed to offer a quick summary, with more in-depth data just a click away for those requiring further analysis.</p>
</div>
<div class="paragraph">
<p><strong>Troubleshooting with Execution Details</strong></p>
</div>
<div class="paragraph">
<p>The detailed view of scenario executions is an invaluable tool for troubleshooting.
By examining the requests and responses, users can identify discrepancies or unexpected behavior.
Furthermore, the detailed logs and error messages serve as a direct insight into the scenario&#8217;s runtime, aiding in rapid diagnosis and resolution of any issues encountered.</p>
</div>
<div class="paragraph">
<p>Leveraging the execution details effectively can significantly enhance the efficiency of testing cycles and contribute to a more robust and reliable testing process within the Citrus framework.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="user-interface-entities"><a class="anchor" href="#user-interface-entities"></a><a class="link" href="#user-interface-entities">7.4. Exploring Database Entities</a></h3>
<div class="paragraph">
<p>For instances when you require more detailed information or are unable to locate specific data within the simulator&#8217;s UI, the "Entities" drop-down menu offers a solution.
Located at the top of the user interface, this menu provides direct access to all database entities used by the simulator, allowing for an in-depth review of the underlying data.</p>
</div>
<div class="sect3">
<h4 id="user-interface-entities-access"><a class="anchor" href="#user-interface-entities-access"></a><a class="link" href="#user-interface-entities-access">7.4.1. Accessing Database Entities</a></h4>
<div class="paragraph">
<p>To explore the database entities:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the top menu of the simulator&#8217;s user interface.</p>
</li>
<li>
<p>Locate and click on the "Entities" drop-down menu.</p>
</li>
<li>
<p>Select the specific entity you wish to review from the list that appears.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Each selection provides a detailed view of the chosen entity, including all relevant records and their attributes.
This feature is particularly useful for advanced users who need to analyze the simulator&#8217;s data storage, audit logs, or troubleshoot specific issues related to the data.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="starter"><a class="anchor" href="#starter"></a><a class="link" href="#starter">8. Starter</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Usually the simulator provides simulation for server APIs so clients are able to call the simulator. In some cases things may go the other way round. The simulator is able to start
scenarios via web user interface. This way the simulator is able to start a communication instead of waiting for requests to arrive. In this case the simulator is able to
act as client in order to call other server APIs.</p>
</div>
<div class="paragraph">
<p>This mechanism is covered by starter implementations on the simulator. In fact the starter implementations are simulator scenarios that also implement the <code>ScenarioStarter</code>
interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">ScenarioStarter</span> <span class="directive">extends</span> SimulatorScenario {

    <span class="keyword">default</span> <span class="predefined-type">Collection</span>&lt;ScenarioParameter&gt; getScenarioParameters() {
        <span class="keyword">return</span> <span class="predefined-type">Collections</span>.EMPTY_LIST;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>ScenarioStarter</strong> extends the <strong>SimulatorScenario</strong> interface. So each scenario can also act as a starter. See the following sample starter implementation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Starter</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">HelloStarter</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloStarter</span> <span class="directive">extends</span> AbstractScenarioStarter {

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> JmsEndpoint outboundEndpoint;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.send(outboundEndpoint)
                .payload(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hello from simulator!</span><span class="delimiter">&quot;</span></span>);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The starter class is annotated with <code>@Starter</code> annotation and gets a unique name. The class extends from <code>AbstractScenarioStarter</code> for most comfortable setup. In the run
method we can add custom scenario logic as usual. Inthe sample above we send a JMS message to some endpoint that has been injected as Spring bean component.</p>
</div>
<div class="paragraph">
<p>All these starter implementations in the project are automatically loaded in the simulator user interface so you can launch those scenarios.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/scenario-starter-list.png" alt="scenario starter list"></span></p>
</div>
<div class="paragraph">
<p>The list of available scenarios now also contains the starter implementations. The launch button brings you to the starter detail page.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/scenario-starter-details.png" alt="scenario starter details"></span></p>
</div>
<div class="paragraph">
<p>The scenario starter is able to define parameters that need to be filled before the starter is executed. In case you press the <strong>Launch</strong> button the scenario is executed with those parameters.
The parameter HTML form is auto generated from the starter class. In the following section we see how the starter class is able to define those parameters.</p>
</div>
<div class="sect2">
<h3 id="starter-parameter"><a class="anchor" href="#starter-parameter"></a><a class="link" href="#starter-parameter">8.1. Starter Parameter</a></h3>
<div class="paragraph">
<p>Starter implementations are executable in the simulator user interface. The starter is able to define parameters that should be filled out before the starter performs its actions. In
the starter class you can specify the parameters as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Starter</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">HelloStarter</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">HelloStarter</span> <span class="directive">extends</span> AbstractScenarioStarter {

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> JmsEndpoint outboundEndpoint;

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="type">void</span> run(ScenarioRunner scenario) {
        scenario.send(outboundEndpoint)
                .payload(<span class="string"><span class="delimiter">&quot;</span><span class="content">${greeting}</span><span class="delimiter">&quot;</span></span>);
    }

    <span class="annotation">@Override</span>
    <span class="directive">public</span> <span class="predefined-type">List</span>&lt;ScenarioParameter&gt; getScenarioParameters() {
        <span class="predefined-type">List</span>&lt;ScenarioParameter&gt; scenarioParameters = <span class="keyword">new</span> <span class="predefined-type">ArrayList</span>&lt;&gt;();

        <span class="comment">// greeting (text box)</span>
        scenarioParameters.add(<span class="keyword">new</span> ScenarioParameterBuilder()
                .name(<span class="string"><span class="delimiter">&quot;</span><span class="content">greeting</span><span class="delimiter">&quot;</span></span>)
                .label(<span class="string"><span class="delimiter">&quot;</span><span class="content">Greeting Text</span><span class="delimiter">&quot;</span></span>)
                .required()
                .textbox()
                .value(<span class="string"><span class="delimiter">&quot;</span><span class="content">Hi there!</span><span class="delimiter">&quot;</span></span>)
                .build());

        <span class="keyword">return</span> scenarioParameters;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The sample above defines a parameter called <strong>greeting</strong>. The parameter is of type <code>textbox</code> and has a default value <strong>Hi there!</strong>. This parameter
information is used to aut generate a HTML form in the simulator user interface. You can specify as multiple parameters of different types.</p>
</div>
<div class="hdlist">
<div class="title">Parameter types</div>
<table>
<tr>
<td class="hdlist1">
textbox
</td>
<td class="hdlist2">
<p>Renders a normal HTML input field</p>
</td>
</tr>
<tr>
<td class="hdlist1">
textarea
</td>
<td class="hdlist2">
<p>Renders a textarea input field</p>
</td>
</tr>
<tr>
<td class="hdlist1">
dropdown
</td>
<td class="hdlist2">
<p>Renders a dropdown select field with predefined options</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Parameters can be required or optional and receive a label that is displayed in the HTML form. Also you can add default values.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="samples"><a class="anchor" href="#samples"></a><a class="link" href="#samples">9. Samples</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Documentation can only provide theoretical insights of what the application is capable to do or not to do. Good sample projects
help both beginners and experts to reach complete understanding of how the simulator works in different environments.</p>
</div>
<div class="paragraph">
<p>Following from that we try to provide sample project that demonstrate the simulator usage in real world examples. Please see the following
sample projects with complete code available on <a href="https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples">github</a>.</p>
</div>
<div class="sect2">
<h3 id="samples-rest"><a class="anchor" href="#samples-rest"></a><a class="link" href="#samples-rest">9.1. REST sample</a></h3>
<div class="dlist">
<div class="title">Sample repositories</div>
<dl>
<dt class="hdlist1">Http REST</dt>
<dd>
<p><a href="https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-rest" class="bare">https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-rest</a></p>
</dd>
<dt class="hdlist1">Auto generated from swagger</dt>
<dd>
<p><a href="https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-swagger" class="bare">https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-swagger</a></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="samples-soap"><a class="anchor" href="#samples-soap"></a><a class="link" href="#samples-soap">9.2. SOAP sample</a></h3>
<div class="dlist">
<div class="title">Sample repositories</div>
<dl>
<dt class="hdlist1">Http SOAP</dt>
<dd>
<p><a href="https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-ws" class="bare">https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-ws</a></p>
</dd>
<dt class="hdlist1">Http SOAP client</dt>
<dd>
<p><a href="https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-ws-client" class="bare">https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-ws-client</a></p>
</dd>
<dt class="hdlist1">Auto generated from WSDL</dt>
<dd>
<p><a href="https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-wsdl" class="bare">https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-wsdl</a></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="samples-jms"><a class="anchor" href="#samples-jms"></a><a class="link" href="#samples-jms">9.3. JMS sample</a></h3>
<div class="dlist">
<div class="title">Sample repositories</div>
<dl>
<dt class="hdlist1">JMS synchronous</dt>
<dd>
<p><a href="https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-jms" class="bare">https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-jms</a></p>
</dd>
<dt class="hdlist1">JMS asynchronous</dt>
<dd>
<p><a href="https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-jms-fax" class="bare">https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-jms-fax</a></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="samples-mail"><a class="anchor" href="#samples-mail"></a><a class="link" href="#samples-mail">9.4. Mail sample</a></h3>
<div class="dlist">
<div class="title">Sample repositories</div>
<dl>
<dt class="hdlist1">Mail endpoint simulator</dt>
<dd>
<p><a href="https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-mail" class="bare">https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-mail</a></p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="samples-combined"><a class="anchor" href="#samples-combined"></a><a class="link" href="#samples-combined">9.5. Combined sample</a></h3>
<div class="dlist">
<div class="title">Sample repositories</div>
<dl>
<dt class="hdlist1">Http REST and JMS combined</dt>
<dd>
<p><a href="https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-combined" class="bare">https://github.com/citrusframework/citrus-simulator/tree/master/simulator-samples/sample-combined</a></p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="links"><a class="anchor" href="#links"></a><a class="link" href="#links">10. Links &amp; Further reading</a></h2>
<div class="sectionbody">
<div class="hdlist">
<div class="title">Reading material</div>
<table>
<tr>
<td class="hdlist1">
<a href="https://www.citrusframework.org/reference/html/">Citrus manual</a>
</td>
<td class="hdlist2">
<p>gives you a detailed description of all Citrus features</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://github.com/citrusframework/citrus-simulator/blob/master/simulator-samples">Sample projects</a>
</td>
<td class="hdlist2">
<p>demonstrate typical simulator scenarios with different message transports</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://www.citrusframework.org/docs/history">ChangeLog</a>
</td>
<td class="hdlist2">
<p>shows the release history</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="https://github.com/citrusframework/citrus-simulator/blob/master/simulator-docs/contributing.md">Contributing</a>
</td>
<td class="hdlist2">
<p>explains how you can contribute to this project</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.1.1<br>
Last updated 2025-09-28 20:04:01 +0200
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
<style>

    #footer-sponsor {
        position: absolute;
        bottom: 5px;
        right: 25px;
        float: right;
    }

</style>
<div id="footer-sponsor">
    <a href="https://www.consol.de" target="_blank" alt="ConSol Software GmbH"><img src="images/sponsor-logo.png" /></a>
</div>
</body>
</html>